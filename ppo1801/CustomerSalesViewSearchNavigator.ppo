#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 5 ".\Prg\tablet\view\terceros\CustomerSalesViewSearchNavigator.prg"
_HB_CLASS CustomerSalesViewSearchNavigator ; function CustomerSalesViewSearchNavigator ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "CustomerSalesViewSearchNavigator", iif( .T., { @DocumentSalesViewSearchNavigator() }, { @HBObject() } ), @CustomerSalesViewSearchNavigator() ) ) ;

   _HB_MEMBER { oSayFilter } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSayFilter"}, .F. )

   _HB_MEMBER getDataTable(); oClass:AddInline( "getDataTable", {|Self | ( ( Self ) ), ( "FacCliT" ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getWorkArea(); oClass:AddInline( "getWorkArea", {|Self | ( ( Self ) ), ( D():FacturasClientes( ::getView() ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER botonesAcciones(); oClass:AddMethod( "botonesAcciones", @CustomerSalesViewSearchNavigator_botonesAcciones(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getTitleDocumento(); oClass:AddInline( "getTitleDocumento", {|Self | ( ( Self ) ), ( "Facturas cliente" ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER ChangeFilter(); oClass:AddMethod( "ChangeFilter", @CustomerSalesViewSearchNavigator_ChangeFilter(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Resource(); oClass:AddMethod( "Resource", @CustomerSalesViewSearchNavigator_Resource(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setColumns(); oClass:AddMethod( "setColumns", @CustomerSalesViewSearchNavigator_setColumns(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS CustomerSalesViewSearchNavigator ;



static FUNCTION CustomerSalesViewSearchNavigator_botonesAcciones( ) ; local Self AS CLASS CustomerSalesViewSearchNavigator := QSelf() AS CLASS CustomerSalesViewSearchNavigator








   TGridImage():Build(  {  "nTop"      => 75, "nLeft"     => {|| GridWidth( 0.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_safe_into_64", "bLClicked" => {|| LiquidateReceipt():New( ::oSender:nView, ::oSender:cIdCliente ):Play(), ::oSender:RefreshBrowseCustomerSales( ::oSayFilter:cCaption ) }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 75, "nLeft"     => {|| GridWidth( 1.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_money2_64", "bLClicked" => {|| ::oSender:liqInvoice( ::getField( "Serie" ) + str( ::getField( "Numero" ) ) + ::getField( "Sufijo" ) ), ::oSender:RefreshBrowseCustomerSales( ::oSayFilter:cCaption ) }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 75, "nLeft"     => {|| GridWidth( 2.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_funnel_64", "bLClicked" => {|| ::ChangeFilter() }, "oWnd"      => ::oDlg } )











   ::oSayFilter  := TGridSay():Build(  {  "nRow"      => 75, "nCol"      => {|| GridWidth( 3.5, ::oDlg ) }, "bText"     => {|| "" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 3, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )

   ::oDlg:bStart     := {|| ::ChangeFilter() }

Return ( .T. )



static FUNCTION CustomerSalesViewSearchNavigator_ChangeFilter( ) ; local Self AS CLASS CustomerSalesViewSearchNavigator := QSelf() AS CLASS CustomerSalesViewSearchNavigator

   local cText    := ""

   do case
      case ::oSayFilter:cCaption == ""
         cText    := "Pendientes"

      case ::oSayFilter:cCaption == "Cobradas"
         cText    := "Todas"

      case ::oSayFilter:cCaption == "Pendientes"
         cText    := "Cobradas"

      case ::oSayFilter:cCaption == "Todas"
         cText    := "Pendientes"

   end

   ::oSayFilter:VarPut( cText )
   ::oSayFilter:Refresh()

   ::oSender:FilterSalesCustomerTable( ::oSayFilter:cCaption )

Return ( .T. )



static FUNCTION CustomerSalesViewSearchNavigator_Resource( ) ; local Self AS CLASS CustomerSalesViewSearchNavigator := QSelf() AS CLASS CustomerSalesViewSearchNavigator

   ::oDlg                     := TDialog():New( 1, 5, 40, 100, "gestool TABLET",,, .F., ::Style,, ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ),,, .F.,, oGridFont(),,,, .F.,, "oDlg" )

   ::defineTitulo()

   if ::lSelectorMode
      ::defineAceptarCancelar()
   else
      ::defineSalir()
   end

   ::defineBarraBusqueda()

   ::botonesAcciones()

   ::botonesMovimientoBrowse()

   ::browseGeneral()

   ::oBrowse:bLDblClick       := {|| ::oSender:visualizaFactura( ::getField( "Serie" ) + str( ::getField( "Numero" ) ) + ::getField( "Sufijo" ) ) }

   ::oDlg:bResized            := {|| ::resizeDialog() }

   ::oDlg:Activate( , , , .T., , , {|| ::initDialog() } )

   ::endDialog()

Return ( self )



static FUNCTION CustomerSalesViewSearchNavigator_setColumns( ) ; local Self AS CLASS CustomerSalesViewSearchNavigator := QSelf() AS CLASS CustomerSalesViewSearchNavigator

   ::setBrowseConfigurationName( "grid_ventasclientes" )

   with object ( ::addColumn() )
      :cHeader           := "Id"
      :bEditValue        := {|| ::getField( "Serie" ) + "/" + alltrim( str( ::getField( "Numero" ) ) ) + Chr(13)+Chr(10) + dtoc( ::getField( "Fecha" ) ) }
      :nWidth            := 165
   end

   with object ( ::addColumn() )
      :cHeader           := "Cliente"
      :bEditValue        := {|| alltrim( ::getField( "Cliente" ) ) + Chr(13)+Chr(10) + alltrim( ::getField( "NombreCliente" ) ) }
      :nWidth            := 310
   end

   with object ( ::addColumn() )
      :cHeader           := "Agente"
      :bEditValue        := {|| ::getField( "Agente" ) }
      :nWidth            := 100
      :lHide             := .T.
   end

   with object ( ::addColumn() )
      :cHeader           := "Base"
      :bEditValue        := {|| ::getField( "TotalNeto" ) }
      :cEditPicture      := cPorDiv()
      :nWidth            := 100
      :nDataStrAlign     := 1
      :nHeadStrAlign     := 1
      :lHide             := .T.
   end

   with object ( ::addColumn() )
      :cHeader           := cImp()
      :bEditValue        := {|| ::getField( "TotalImpuesto" ) }
      :cEditPicture      := cPorDiv()
      :nWidth            := 100
      :nDataStrAlign     := 1
      :nHeadStrAlign     := 1
      :lHide             := .T.
   end

   with object ( ::addColumn() )
      :cHeader           := "R.E."
      :bEditValue        := {|| ::getField( "TotalRecargo" ) }
      :cEditPicture      := cPorDiv()
      :nWidth            := 100
      :nDataStrAlign     := 1
      :nHeadStrAlign     := 1
      :lHide             := .T.
   end

   with object ( ::addColumn() )
      :cHeader           := "Tot/Pdt."
      :bEditValue        := {|| Trans( ::getField( "TotalDocumento" ), cPorDiv() ) + Chr(13)+Chr(10) + Trans( nTotPdtFacCli( ::getField( "Serie" ) + str( ::getField( "Numero" ) ) + ::getField( "Sufijo" ), D():FacturasClientes( ::oSender:nView ), D():FacturasClientesLineas( ::oSender:nView ), D():TiposIva( ::oSender:nView ), D():Divisas( ::oSender:nView ), D():FacturasClientesCobros( ::oSender:nView ), D():AnticiposClientes( ::oSender:nView ) ), cPorDiv() ) }
      :nWidth            := 155
      :nDataStrAlign     := 1
      :nHeadStrAlign     := 1
   end

Return ( self )
