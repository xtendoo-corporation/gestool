#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 4 ".\Prg\Views\Dialogs\FacturasClientesView.prg"
_HB_CLASS FacturasClientesView ; function FacturasClientesView ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "FacturasClientesView", iif( .T., { @SQLBaseView() }, { @HBObject() } ), @FacturasClientesView() ) ) ;

   _HB_MEMBER { oExplorerBar } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oExplorerBar"}, .F. )

   _HB_MEMBER { oGetNumero } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oGetNumero"}, .F. )

   _HB_MEMBER Activate(); oClass:AddMethod( "Activate", @FacturasClientesView_Activate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Activating(); oClass:AddMethod( "Activating", @FacturasClientesView_Activating(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER startDialog(); oClass:AddMethod( "startDialog", @FacturasClientesView_startDialog(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER addLinksToExplorerBar(); oClass:AddMethod( "addLinksToExplorerBar", @FacturasClientesView_addLinksToExplorerBar(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS FacturasClientesView ;



static FUNCTION FacturasClientesView_Activating( ) ; local Self AS CLASS FacturasClientesView := QSelf() AS CLASS FacturasClientesView

   if ::oController:isAppendOrDuplicateMode()
      ::oController:oModel:hBuffer()
   end

RETURN ( self )



static FUNCTION FacturasClientesView_Activate( ) ; local Self AS CLASS FacturasClientesView := QSelf() AS CLASS FacturasClientesView

   local cSeleccion := "aaa"



   ::oDialog = TDialog():New(,,,, ::LblTitle() + "factura cliente", "TRANSACION_COMERCIAL",, .F.,,,,,, .F.,,,,,, .F.,, "::oDialog", nil, )





   ::oBitmap := TBitmap():ReDefine( 900, ::oController:getImage( "48" ),, ::oDialog,,, .F., .F.,,, .F.,,, .T. )





   ::oMessage := TSay():ReDefine( 800, {||      "Clientes"}, ::oDialog,,,, .F., getBoldFont(), .F., .F., )







   ::oFolder := TFolder():ReDefine( 500, {"General", "Comercial"}, { "TRANSACION_GENERAL","CLIENTE_COMERCIAL" }, ::oDialog,,,,, .F., )

   ::redefineExplorerBar()



   ::oController:oClientesController:oGetSelector:Bind( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "cliente_uuid" ], ::oController:oModel:hBuffer[ "cliente_uuid" ]:= u ) } )
   ::oController:oClientesController:oGetSelector:Build( { "idGet" => 170, "idText" => 180, "idNif" => 181, "idDireccion" => 183, "idCodigoPostal" => 184, "idPoblacion" => 185, "idProvincia" => 186, "idTelefono" => 187, "oDialog" => ::oFolder:aDialogs[1] } )



   ::oController:oSerieDocumentoComponent:BindValue( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "serie" ], ::oController:oModel:hBuffer[ "serie" ]:= u ) } )
   ::oController:oSerieDocumentoComponent:Activate( 4005, ::oFolder:aDialogs[1] )



   ::oController:oNumeroDocumentoComponent:BindValue( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "numero" ], ::oController:oModel:hBuffer[ "numero" ]:= u ) } )
   ::oController:oNumeroDocumentoComponent:Activate( 110, ::oFolder:aDialogs[1] )








   TGetHlp():ReDefine( 130, { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "fecha" ], ::oController:oModel:hBuffer[ "fecha" ]:= u ) }, ::oFolder:aDialogs[1],, "@D",,,,,,, .F., {||        ( ::oController:isNotZoomMode() )},, .F., .T.,,,,,, nil,,, )



   ::oController:oFormasPagoController:oGetSelector:Bind( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "forma_pago_uuid" ], ::oController:oModel:hBuffer[ "forma_pago_uuid" ]:= u ) } )
   ::oController:oFormasPagoController:oGetSelector:Activate( 240, 241, ::oFolder:aDialogs[1] )



   ::oController:oRutasController:oGetSelector:Bind( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "ruta_uuid" ], ::oController:oModel:hBuffer[ "ruta_uuid" ]:= u ) } )
   ::oController:oRutasController:oGetSelector:Activate( 260, 261, ::oFolder:aDialogs[1] )



   ::oController:oAgentesController:oGetSelector:Bind( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "agente_uuid" ], ::oController:oModel:hBuffer[ "agente_uuid" ]:= u ) } )
   ::oController:oAgentesController:oGetSelector:Activate( 250, 251, ::oFolder:aDialogs[1] )



   ::oController:oAlmacenesController:oGetSelector:Bind( { | u | If( PCount()==0, ::oController:oModel:hBuffer[ "almacen_uuid" ], ::oController:oModel:hBuffer[ "almacen_uuid" ]:= u ) } )
   ::oController:oAlmacenesController:oGetSelector:Activate( 230, 231, ::oFolder:aDialogs[1] )







   TButton():ReDefine( 1, {||( if( validateDialog( ::oFolder:aDialogs ), ::oDialog:end( 1 ), ) )}, ::oDialog,,, .F., {||        ( ::oController:isNotZoomMode() )},,, .F. )





   TButton():ReDefine( 2, {||( ::oDialog:end() )}, ::oDialog,,, .F.,,,, .T. )

   if ::oController:isNotZoomMode()
      ::oDialog:AddFastKey( 116, {|| if( validateDialog( ::oFolder:aDialogs ), ::oDialog:end( 1 ), ) } )
   end

   ::oDialog:bStart := {|| ::startDialog() }

   ::oDialog:Activate( ::oDialog:bLClicked, ::oDialog:bMoved, ::oDialog:bPainted, .T.,,,, ::oDialog:bRClicked,,, )

   ::oBitmap:end()

RETURN ( ::oDialog:nResult )



static FUNCTION FacturasClientesView_startDialog( ) ; local Self AS CLASS FacturasClientesView := QSelf() AS CLASS FacturasClientesView

   ::addLinksToExplorerBar()

   ::oController:oClientesController:oGetSelector:Start()

   ::oController:oFormasPagoController:oGetSelector:Start()

   ::oController:oRutasController:oGetSelector:Start()

   ::oController:oAgentesController:oGetSelector:Start()

RETURN ( self )



static FUNCTION FacturasClientesView_addLinksToExplorerBar( ) ; local Self AS CLASS FacturasClientesView := QSelf() AS CLASS FacturasClientesView

   local oPanel

   oPanel            := ::oExplorerBar:AddPanel( "Datos relacionados", nil, 1 )

   if ::oController:isZoomMode()
      RETURN ( self )
   end

   oPanel:AddLink( "Incidencias...",            {|| MsgInfo( "Incidencias" ) }, "gc_money_interest_16" )

   oPanel            := ::oExplorerBar:AddPanel( "Otros datos", nil, 1 )

   if ::oController:isNotZoomMode()
      oPanel:AddLink( "Campos extra...",        {|| MsgInfo( "Incidencias" ) }, "gc_money_interest_16" )
   end

RETURN ( self )
