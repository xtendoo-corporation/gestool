#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 7 ".\Prg\Views\Dialogs\ImprimirSeriesView.prg"
_HB_CLASS ImprimirSeriesView ; function ImprimirSeriesView ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "ImprimirSeriesView", iif( .T., { @SQLBaseView() }, { @HBObject() } ), @ImprimirSeriesView() ) ) ;

   _HB_MEMBER { oDialog } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDialog"}, .F. )

   _HB_MEMBER { oSayRegistrosSeleccionados } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSayRegistrosSeleccionados"}, .F. )

   _HB_MEMBER { oListboxFile } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oListboxFile"}, .F. )
   _HB_MEMBER { aListboxFile } ; oClass:AddMultiData(, {}, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aListboxFile"}, .F. )
   _HB_MEMBER { cListboxFile } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cListboxFile"}, .F. )

   _HB_MEMBER { lCopies } ; oClass:AddMultiData(, .T., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"lCopies"}, .F. )
   _HB_MEMBER { nCopies } ; oClass:AddMultiData(, 1, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nCopies"}, .F. )

   _HB_MEMBER { lInvertirOrden } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"lInvertirOrden"}, .F. )

   _HB_MEMBER { cPrinter } ; oClass:AddMultiData(, ImpresoraDefectoUsuario(), nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cPrinter"}, .F. )

   _HB_MEMBER Activate(); oClass:AddMethod( "Activate", @ImprimirSeriesView_Activate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER startActivate(); oClass:AddMethod( "startActivate", @ImprimirSeriesView_startActivate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER showDocument(); oClass:AddMethod( "showDocument", @ImprimirSeriesView_showDocument(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getRegistrosSeleccionados(); oClass:AddInline( "getRegistrosSeleccionados", {|Self | ( ( Self ) ), ( iif( !empty( ::oController ), "( " + alltrim( str( len( ::oController:getIds() ) ) ) + ") registro(s) seleccionado(s)", "( 0 ) registro(s) seleccionado(s)" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS ImprimirSeriesView ;



static FUNCTION ImprimirSeriesView_Activate( ) ; local Self AS CLASS ImprimirSeriesView := QSelf() AS CLASS ImprimirSeriesView

   local oBmp

   ::oDialog = TDialog():New(,,,,, "IMPRIMIR_SERIES",, .F.,,,,,, .F.,,,,,, .F.,, "::oDialog", nil, )





      oBmp := TBitmap():ReDefine( 500, "gc_printer2_48",, ::oDialog,,, .F., .F.,,, .F.,,, .T. )




      ::oSayRegistrosSeleccionados := TSay():ReDefine( 100, {||         ::getRegistrosSeleccionados()}, ::oDialog,,,, .F.,, .F., .F., )

      TBtnBmp():ReDefine( 110, "new16",,,,, {|| ::oController:newDocument() }, ::oDialog, .F., , .F., "Añadir formato" )

      TBtnBmp():ReDefine( 120, "edit16",,,,, {|| ::oController:editDocument() }, ::oDialog, .F., , .F., "Modificar formato" )

      TBtnBmp():ReDefine( 130, "del16",,,,, {|| ::oController:deleteDocument() }, ::oDialog, .F., , .F., "Eliminar formato" )

      TBtnBmp():ReDefine( 140, "refresh16",,,,, {|| ::oController:loadDocuments() }, ::oDialog, .F., , .F., "Recargar formato" )





      ::oListboxFile := TListBox():ReDefine( 150, { | u | If( PCount()==0, ::cListboxFile, ::cListboxFile:= u ) }, ::aListboxFile,, ::oDialog,,,,,,,,, .F.,, )



      TCheckBox():ReDefine( 160, { | u | If( PCount()==0, ::lCopies, ::lCopies:= u ) }, ::oDialog,,,,,,, .F.,, .F. )








      TGetHlp():ReDefine( 170, { | u | If( PCount()==0, ::nCopies, ::nCopies:= u ) }, ::oDialog,, "99999",,,,,,, .F., {||        ( !::lCopies )},, .F., .T.,,, {||         1}, {||         99999},, nil,,, )



      TCheckBox():ReDefine( 180, { | u | If( PCount()==0, ::lInvertirOrden, ::lInvertirOrden:= u ) }, ::oDialog,,,,,,, .F.,, .F. )




      TComboBox():ReDefine( 190, { | u | If( PCount()==0, ::cPrinter, ::cPrinter:= u ) }, aGetPrinters(), ::oDialog,,,,,,, .F.,,,,,,,,,,,,,, )




      TButton():ReDefine( 1, {||( ::showDocument() )}, ::oDialog,,, .F.,,,, .F. )




      TButton():ReDefine( 2, {||( ::oDialog:end() )}, ::oDialog,,, .F.,,,, .F. )

      ::oDialog:AddFastKey( 116, {|| ::showDocument() } )

      ::oDialog:bStart  := {|| ::startActivate() }

   ::oDialog:Activate( ::oDialog:bLClicked, ::oDialog:bMoved, ::oDialog:bPainted, .T.,,,, ::oDialog:bRClicked,,, )

   oBmp:end()

RETURN ( ::oDialog:nResult )



static FUNCTION ImprimirSeriesView_startActivate( ) ; local Self AS CLASS ImprimirSeriesView := QSelf() AS CLASS ImprimirSeriesView

   ::oController:loadDocuments()

RETURN ( self )



static FUNCTION ImprimirSeriesView_showDocument( ) ; local Self AS CLASS ImprimirSeriesView := QSelf() AS CLASS ImprimirSeriesView

   ::oDialog:disable()

   ::oController:showDocument()

   ::oDialog:enable()

RETURN ( self )
