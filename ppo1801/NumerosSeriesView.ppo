#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 7 ".\Prg\Views\NumerosSeriesView.prg"
_HB_CLASS NumerosSeriesView ; function NumerosSeriesView ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "NumerosSeriesView", iif( .T., { @SQLBaseView() }, { @HBObject() } ), @NumerosSeriesView() ) ) ;

   _HB_MEMBER { oTotalUnidades } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oTotalUnidades"}, .F. )
   _HB_MEMBER { nTotalUnidades } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nTotalUnidades"}, .F. )
   _HB_MEMBER { cPreFix } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cPreFix"}, .F. )
   _HB_MEMBER { oSerieInicial } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSerieInicial"}, .F. )
   _HB_MEMBER { nSerieInicial } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nSerieInicial"}, .F. )
   _HB_MEMBER { oSerieFinal } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSerieFinal"}, .F. )
   _HB_MEMBER { nSerieFinal } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nSerieFinal"}, .F. )
   _HB_MEMBER { oNumGen } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oNumGen"}, .F. )
   _HB_MEMBER { nNumGen } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nNumGen"}, .F. )
   _HB_MEMBER { oBrwSer } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oBrwSer"}, .F. )

   _HB_MEMBER { oDialog } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDialog"}, .F. )

   _HB_MEMBER getParentControler(); oClass:AddInline( "getParentControler", {|Self | ( ( Self ) ), ( ::oController:oSenderController ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getParentDialogView(); oClass:AddInline( "getParentDialogView", {|Self | ( ( Self ) ), ( ::getParentControler():oDialogView ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getBuffer(); oClass:AddInline( "getBuffer", {|Self | ( ( Self ) ), ( ::oController:oModel:aBuffer ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getValueBuffer(); oClass:AddInline( "getValueBuffer", {|Self, nArrayAt, key | ( ( Self ) ), ( ::oController:getValueBuffer( nArrayAt, key ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER setValueBuffer(); oClass:AddInline( "setValueBuffer", {|Self, nArrayAt, key, value | ( ( Self ) ), ( ::oController:setValueBuffer( nArrayAt, key, value ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Activate(); oClass:AddMethod( "Activate", @NumerosSeriesView_Activate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS NumerosSeriesView ;



static FUNCTION NumerosSeriesView_Activate( ) ; local Self AS CLASS NumerosSeriesView := QSelf() AS CLASS NumerosSeriesView

   local oBtn
   local oBmpGeneral

   ::nSerieInicial            := 0
   ::nSerieFinal              := 0
   ::nNumGen                  := 0
   ::cPreFix                  := Space( 150 )

   ::oDialog = TDialog():New(,,,, ::lblTitle() + "series de movimientos de almacén", "VtaNumSer",, .F.,,,,,, .F.,,,,,, .F.,, "::oDialog", nil, )





      oBmpGeneral := TBitmap():ReDefine( 800, "gc_odometer_48",, ::oDialog,,, .F., .F.,,, .F.,,, .T. )






      ::oTotalUnidades := TGetHlp():ReDefine( 100, { | u | If( PCount()==0, ::nTotalUnidades, ::nTotalUnidades:= u ) }, ::oDialog,, MasUnd(),,,,,,, .F., {||        .F.},, .F., .F.,,,,,, nil,,, )



      TGetHlp():ReDefine( 110, { | u | If( PCount()==0, ::cPreFix, ::cPreFix:= u ) }, ::oDialog,,,,,,,,, .F.,,, .F., .F.,,,,,, nil,,, )







      ::oSerieInicial := TGetHlp():ReDefine( 120, { | u | If( PCount()==0, ::nSerieInicial, ::nSerieInicial:= u ) }, ::oDialog,, "99999999999999999999", {||       ( ::oSerieFinal:cText( ::nSerieInicial + ::nTotalUnidades ), .T. )},,,,,, .F.,,, .F., .T.,,,,,, nil,,, )






      ::oSerieFinal := TGetHlp():ReDefine( 130, { | u | If( PCount()==0, ::nSerieFinal, ::nSerieFinal:= u ) }, ::oDialog,, "99999999999999999999",,,,,,, .F., {||        .F.},, .F., .F.,,,,,, nil,,, )






      ::oNumGen := TGetHlp():ReDefine( 140, { | u | If( PCount()==0, ::nNumGen, ::nNumGen:= u ) }, ::oDialog,, "99999999999999999999",,,,,,, .F.,,, .F., .T.,,,,,, nil,,, )




      TButton():ReDefine( 500, {||( ::oController:GenerarSeries() )}, ::oDialog,,, .F.,,,, .F. )

      ::oBrwSer                  := IXBrowse():New( ::oDialog )

      ::oBrwSer:bClrSel          := {|| { 0, ( 229 + ( 229 * 256 ) + ( 229 * 65536 ) ) } }
      ::oBrwSer:bClrSelFocus     := {|| { 0, ( 167 + ( 205 * 256 ) + ( 240 * 65536 ) ) } }

      ::oBrwSer:lHScroll         := .F.
      ::oBrwSer:lRecordSelector  := .T.
      ::oBrwSer:lFastEdit        := .T.

      ::oBrwSer:nMarqueeStyle    := 3

      ::oBrwSer:SetArray( ::getBuffer(), , , .F. )

      ::oBrwSer:nColSel          := 2

      with object ( ::oBrwSer:addCol() )
         :cHeader                := "N."
         :bStrData               := {|| Trans( ::oBrwSer:nArrayAt, "999999" ) }
         :nWidth                 := 60
         :nDataStrAlign          := 1
         :nHeadStrAlign          := 1
      end

      with object ( ::oBrwSer:addCol() )
         :cHeader                := "Serie"
         :bEditValue             := {|| Padr( ::getValueBuffer( ::oBrwSer:nArrayAt, "numero_serie" ), 30 ) }
         :nWidth                 :=  240
         :bOnPostEdit            := {|o,x| ::setValueBuffer( ::oBrwSer:nArrayAt, "numero_serie", x ) }
         :nEditType              := 1
      end

      ::oBrwSer:CreateFromResource( 150 )




      TButton():ReDefine( 510, {||( ::oController:EndResource( ::oDialog ) )}, ::oDialog,,, .F.,,,, .F. )




      TButton():ReDefine( 520, {||( ::oDialog:End() )}, ::oDialog,,, .F.,,,, .F. )

   ::oDialog:Activate( ::oDialog:bLClicked, ::oDialog:bMoved, ::oDialog:bPainted, .T.,,,, ::oDialog:bRClicked,,, )

   if !Empty( oBmpGeneral )
      oBmpGeneral:End()
   end

RETURN ( ::oDialog:nResult )
