#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 5 ".\Prg\tablet\view\documentos\ventas\ReceiptDocumentSalesViewEdit.prg"
_HB_CLASS ReceiptDocumentSalesViewEdit ; function ReceiptDocumentSalesViewEdit ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "ReceiptDocumentSalesViewEdit", iif( .T., { @ViewEdit() }, { @HBObject() } ), @ReceiptDocumentSalesViewEdit() ) ) ;

   _HB_MEMBER { oCbxEstado } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oCbxEstado"}, .F. )
   _HB_MEMBER { aCbxEstado } ; oClass:AddMultiData(, { "Cobrado", "Pendiente" }, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aCbxEstado"}, .F. )
   _HB_MEMBER { cCbxEstado } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCbxEstado"}, .F. )

   _HB_MEMBER { oImporteGastos } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oImporteGastos"}, .F. )
   _HB_MEMBER { oImporteCobro } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oImporteCobro"}, .F. )
   _HB_MEMBER { oTotalDocumento } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oTotalDocumento"}, .F. )

   _HB_MEMBER { nImporteOriginal } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nImporteOriginal"}, .F. )

   _HB_MEMBER New(); oClass:AddMethod( "New", @ReceiptDocumentSalesViewEdit_New(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER insertControls(); oClass:AddMethod( "insertControls", @ReceiptDocumentSalesViewEdit_insertControls(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER startDialog(); oClass:AddInline( "startDialog", {|Self | ( ( Self ) ), ( ::nImporteOriginal := ::getValue( "ImporteCobro" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineNumeroRecibo( nRow); oClass:AddMethod( "defineNumeroRecibo", @ReceiptDocumentSalesViewEdit_defineNumeroRecibo(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineFechaExpedicion( nRow); oClass:AddMethod( "defineFechaExpedicion", @ReceiptDocumentSalesViewEdit_defineFechaExpedicion(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER defineFechaVencimiento( nRow); oClass:AddMethod( "defineFechaVencimiento", @ReceiptDocumentSalesViewEdit_defineFechaVencimiento(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineImporte( nRow); oClass:AddMethod( "defineImporte", @ReceiptDocumentSalesViewEdit_defineImporte(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineImporteCobro( nRow); oClass:AddMethod( "defineImporteCobro", @ReceiptDocumentSalesViewEdit_defineImporteCobro(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER defineImporteGastos( nRow); oClass:AddMethod( "defineImporteGastos", @ReceiptDocumentSalesViewEdit_defineImporteGastos(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineCliente( nRow); oClass:AddMethod( "defineCliente", @ReceiptDocumentSalesViewEdit_defineCliente(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineFormaPago( nRow); oClass:AddMethod( "defineFormaPago", @ReceiptDocumentSalesViewEdit_defineFormaPago(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineAgente( nRow); oClass:AddMethod( "defineAgente", @ReceiptDocumentSalesViewEdit_defineAgente(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineConcepto( nRow); oClass:AddMethod( "defineConcepto", @ReceiptDocumentSalesViewEdit_defineConcepto(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER definePagadoPor( nRow); oClass:AddMethod( "definePagadoPor", @ReceiptDocumentSalesViewEdit_definePagadoPor(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineEstado( nRow); oClass:AddMethod( "defineEstado", @ReceiptDocumentSalesViewEdit_defineEstado(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER cTextoEstado(); oClass:AddMethod( "cTextoEstado", @ReceiptDocumentSalesViewEdit_cTextoEstado(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineAceptarCancelar(); oClass:AddMethod( "defineAceptarCancelar", @ReceiptDocumentSalesViewEdit_defineAceptarCancelar(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER validCobro(); oClass:AddMethod( "validCobro", @ReceiptDocumentSalesViewEdit_validCobro(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER validTotalDocumento(); oClass:AddMethod( "validTotalDocumento", @ReceiptDocumentSalesViewEdit_validTotalDocumento(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS ReceiptDocumentSalesViewEdit ;



static FUNCTION ReceiptDocumentSalesViewEdit_New( oSender ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   ::oSender            := oSender

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_insertControls( ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   ::defineNumeroRecibo()

   ::defineFechaExpedicion()
   ::defineFechaVencimiento()

   ::defineEstado()

   ::defineImporte()





   ::defineCliente()

   ::defineFormaPago()

   ::defineAgente()

   ::defineConcepto()

   ::definePagadoPor()

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineCliente( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 200, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Cliente" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "Cliente" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )








   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "NombreCliente" ) }, "oWnd"      => ::oDlg, "lPixels"   => .T., "nWidth"    => {|| GridWidth( 5, ::oDlg ) }, "nHeight"   => 23, "bWhen"     => {|| .F. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineFormaPago( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   local cSayTextFPago  := retFld( hGet( ::oSender:hDictionaryMaster, "Pago" ), D():FormasPago( ::oSender:nView ) )

   If( nRow == nil, nRow := 225, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Forma pago" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "Pago" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )








   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 5, ::oDlg ) }, "bSetGet"   => {|u| if( PCount() == 0, cSayTextFPago, cSayTextFPago := u ) }, "oWnd"      => ::oDlg, "lPixels"   => .T., "nWidth"    => {|| GridWidth( 5, ::oDlg ) }, "nHeight"   => 23, "bWhen"     => {|| .F. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineNumeroRecibo( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   local cNumero        := ""

   If( nRow == nil, nRow := 75, ) ;

   cNumero              := hGet( ::oSender:hDictionaryMaster, "Serie" )
   cNumero              += "/"
   cNumero              += AllTrim( Str( hGet( ::oSender:hDictionaryMaster, "Numero" ) ) )
   cNumero              += "/"
   cNumero              += hGet( ::oSender:hDictionaryMaster, "Sufijo" )
   cNumero              += "-"
   cNumero              += AllTrim( Str( hGet( ::oSender:hDictionaryMaster, "NumeroRecibo" ) ) )











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Número" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| if( PCount() == 0, cNumero, cNumero := u ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineFechaExpedicion( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 100, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "F. Exp." }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "FechaExpedicion" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineFechaVencimiento( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 125, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "F. Vto." }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "FechaVencimiento" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineImporte( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 175, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Importe" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )










   ::oTotalDocumento := TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "TotalDocumento" ) }, "oWnd"      => ::oDlg, "cPict"     => cPorDiv(), "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "lRight"    => .T., "bValid"    => {|| ::validTotalDocumento() } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineImporteCobro( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 200, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Cobros" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   ::oImporteCobro   := TGridGet():Build( {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "ImporteCobro" ) }, "oWnd"      => ::oDlg, "cPict"     => cPorDiv(), "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "lRight"    => .T. } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineImporteGastos( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 225, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Gastos" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )










   ::oImporteGastos  := TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "ImporteGastos" ) }, "oWnd"      => ::oDlg, "cPict"     => cPorDiv(), "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "lRight"    => .T., "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineAgente( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   local cSayTextAgente    := cNbrAgent( hGet( ::oSender:hDictionaryMaster, "Agente" ) )

   If( nRow == nil, nRow := 250, ) ;












   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Agente" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "Agente" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )








   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 5, ::oDlg ) }, "bSetGet"   => {|u| if( PCount() == 0, cSayTextAgente, cSayTextAgente := u ) }, "oWnd"      => ::oDlg, "lPixels"   => .T., "nWidth"    => {|| GridWidth( 5, ::oDlg ) }, "nHeight"   => 23, "bWhen"     => {|| .F. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineConcepto( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 275, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Concepto" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )









   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "Concepto" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 7.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| .F. }, "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_definePagadoPor( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 300, ) ;











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Pagado por" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )








   TGridGet():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "PagadoPor" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 7.5, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bValid"    => {|| .T. } } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_defineEstado( nRow ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   If( nRow == nil, nRow := 150, ) ;

   ::cTextoEstado()











   TGridSay():Build(    {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Estado" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 1.5, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )







   ::oCbxEstado         := TGridComboBox():Build(  {  "nRow"      => nRow, "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| if( PCount() == 0, ::cCbxEstado, ::cCbxEstado := u ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2.5, ::oDlg ) }, "nHeight"   => 25, "aItems"    => ::aCbxEstado } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_cTextoEstado( ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   if hGet( ::oSender:hDictionaryMaster, "LogicoCobrado" )
      ::cCbxEstado  := "Cobrado"
   else
      ::cCbxEstado  := "Pendiente"
   end

Return ( nil )



static FUNCTION ReceiptDocumentSalesViewEdit_defineAceptarCancelar( ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit







   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 7.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_error_64", "bLClicked" => {|| ::oSender:onViewCancel() }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 9.0, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_printer_ok2_64", "bLClicked" => {|| ::oSender:onViewSave(), ::oSender:setTrueAceptarImprimir() }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 10.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_ok_64", "bLClicked" => {|| if( ::validCobro(), ::oSender:onViewSave(), ) }, "oWnd"      => ::oDlg } )

Return ( self )



static FUNCTION ReceiptDocumentSalesViewEdit_validTotalDocumento( ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   if ::getValue( "TotalDocumento" ) > ::nImporteOriginal

      apoloMsgStop( "El importe del cobro excede al importe del recibo" )

      Return ( .F. )

   else

      ::setValue( ::getValue( "TotalDocumento" ), "ImporteCobro" )

   end



Return ( .T. )



static FUNCTION ReceiptDocumentSalesViewEdit_validCobro( ) ; local Self AS CLASS ReceiptDocumentSalesViewEdit := QSelf() AS CLASS ReceiptDocumentSalesViewEdit

   if ::getValue( "ImporteCobro" ) > ::nImporteOriginal

      apoloMsgStop( "El importe del gasto excede al importe del recibo" )

      Return ( .F. )

   end

   if ::getValue( "TotalDocumento" ) > ::nImporteOriginal

      apoloMsgStop( "El importe del cobro excede al importe del recibo" )

      Return ( .F. )

   else

      ::setValue( ::getValue( "TotalDocumento" ), "ImporteCobro" )

   end

Return ( .T. )
