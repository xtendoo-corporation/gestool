#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 6 ".\Prg\Controllers\SQLBaseController.prg"
_HB_CLASS SQLBaseController ; function SQLBaseController ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "SQLBaseController", iif( .F., { }, { @HBObject() } ), @SQLBaseController() ) ) ;

   _HB_MEMBER { oInstance } ; oClass:AddMultiClsData(,, nScope + iif( .F., 16, 0 ) + iif( .T., 32, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oInstance"}, .F. )

   _HB_MEMBER { oSenderController } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSenderController"}, .F. )

   _HB_MEMBER { oExportableController } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oExportableController"}, .F. )

   _HB_MEMBER { oEvents } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oEvents"}, .F. )

   _HB_MEMBER { oModel } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oModel"}, .F. )

   _HB_MEMBER { oRowSet } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oRowSet"}, .F. )

   _HB_MEMBER { oDialogView } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDialogView"}, .F. )

   _HB_MEMBER { uDialogResult } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"uDialogResult"}, .F. )

   _HB_MEMBER { oValidator } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oValidator"}, .F. )

   _HB_MEMBER { oRepository } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oRepository"}, .F. )

   _HB_MEMBER { oBrowseView } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oBrowseView"}, .F. )

   _HB_MEMBER { lTransactional } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"lTransactional"}, .F. )

   _HB_MEMBER { nLevel } ; oClass:AddMultiData(, 63, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nLevel"}, .F. )

   _HB_MEMBER { AS NUMERIC nMode } ; oClass:AddMultiData( "NUMERIC",, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"nMode"}, .F. )

   _HB_MEMBER { cTitle } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cTitle"}, .F. )

   _HB_MEMBER { cName } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cName"}, .F. )

   _HB_MEMBER { hImage } ; oClass:AddMultiData(, {=>}, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"hImage"}, .F. )

   _HB_MEMBER { aSelected } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aSelected"}, .F. )

   _HB_MEMBER { aDocuments } ; oClass:AddMultiData(, {}, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aDocuments"}, .F. )

   _HB_MEMBER { cDirectory } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cDirectory"}, .F. )

   _HB_MEMBER { oGetSelector } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oGetSelector"}, .F. )

   _HB_MEMBER { oView } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oView"}, .F. )

   _HB_MEMBER New(); oClass:AddMethod( "New", @SQLBaseController_New(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER Instance(); oClass:AddInline( "Instance", {|Self | ( ( Self ) ), ( if( empty( ::oInstance ), ::oInstance := ::New(), ), ::oInstance ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER End(); oClass:AddMethod( "End", @SQLBaseController_End(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setDirectory(); oClass:AddInline( "setDirectory", {|Self, cDirectory | ( ( Self ) ), ( ::cDirectory := cDirectory ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getDirectory(); oClass:AddInline( "getDirectory", {|Self | ( ( Self ) ), ( ::cDirectory ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setName(); oClass:AddInline( "setName", {|Self, cName | ( ( Self ) ), ( ::cName := cName ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getName(); oClass:AddInline( "getName", {|Self | ( ( Self ) ), ( ::cName ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getSenderController(); oClass:AddInline( "getSenderController", {|Self | ( ( Self ) ), ( ::oSenderController ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getModel(); oClass:AddInline( "getModel", {|Self | ( ( Self ) ), ( ::oModel ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelColumnKey(); oClass:AddInline( "getModelColumnKey", {|Self | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:cColumnKey, ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelTableName(); oClass:AddInline( "getModelTableName", {|Self | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:cTableName, ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelColumns(); oClass:AddInline( "getModelColumns", {|Self | ( ( Self ) ), ( iif( !empty( ::oModel ) .AND. !empty( ::oModel:hColumns ), ( ::oModel:hColumns ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelExtraColumns(); oClass:AddInline( "getModelExtraColumns", {|Self | ( ( Self ) ), ( iif( !empty( ::oModel ) .AND. !empty( ::oModel:hExtraColumns ), ( ::oModel:hExtraColumns ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getModelBuffer(); oClass:AddInline( "getModelBuffer", {|Self, cColumn | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:getBuffer( cColumn ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER setModelBuffer(); oClass:AddInline( "setModelBuffer", {|Self, cColumn, uValue | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:setBuffer( cColumn, uValue ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER setModelBufferPadr(); oClass:AddInline( "setModelBufferPadr", {|Self, cColumn, uValue | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:setBufferPadr( cColumn, uValue ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getModelBufferColumnKey(); oClass:AddInline( "getModelBufferColumnKey", {|Self | ( ( Self ) ), ( ::getModelBuffer( ( ::oModel:cColumnKey ) ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelgetValue(); oClass:AddInline( "getModelgetValue", {|Self, cSentence | ( ( Self ) ), ( iif( !empty( ::oModel ), ::oModel:getValue( cSentence ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER findInModel(); oClass:AddMethod( "findInModel", @SQLBaseController_findInModel(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER changeModelOrderAndOrientation(); oClass:AddMethod( "changeModelOrderAndOrientation", @SQLBaseController_changeModelOrderAndOrientation(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getModelHeaderFromColumnOrder(); oClass:AddInline( "getModelHeaderFromColumnOrder", {|Self | ( ( Self ) ), ( ::oModel:getHeaderFromColumnOrder() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getId(); oClass:AddInline( "getId", {|Self | ( ( Self ) ), ( iif(  !empty( ::oModel ) .AND. !empty( ::oModel:hBuffer ), hget( ::oModel:hBuffer, "id" ), nil ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getUuid(); oClass:AddInline( "getUuid", {|Self | ( ( Self ) ), ( iif(  !empty( ::oModel ) .AND. !empty( ::oModel:hBuffer ), hget( ::oModel:hBuffer, "uuid" ), nil ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getRowSet(); oClass:AddInline( "getRowSet", {|Self | ( ( Self ) ), ( ::oRowSet ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER saveRowSetRecno(); oClass:AddInline( "saveRowSetRecno", {|Self | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:saveRecno(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER restoreRowSetRecno(); oClass:AddInline( "restoreRowSetRecno", {|Self | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:restoreRecno(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER gotoRowSetRecno(); oClass:AddInline( "gotoRowSetRecno", {|Self, nRecno | ( ( Self ) ), ( iif(  !empty( ::oRowSet ) .AND. hb_isnumeric( nRecno ), ::oRowSet:gotoRecno( nRecno ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER findRowSet(); oClass:AddInline( "findRowSet", {|Self, nId | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:find( nId ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER refreshRowSet(); oClass:AddInline( "refreshRowSet", {|Self | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:refresh(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER refreshRowSetAndFindId(); oClass:AddInline( "refreshRowSetAndFindId", {|Self, nId | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:refreshAndFindId( nId ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER goDownRowSet(); oClass:AddInline( "goDownRowSet", {|Self | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:goDown(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER goUpRowSet(); oClass:AddInline( "goUpRowSet", {|Self | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:goUp(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER getIdFromRecno(); oClass:AddInline( "getIdFromRecno", {|Self, aSelected | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:IdFromRecno( aSelected ), {} ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getUuidFromRecno(); oClass:AddInline( "getUuidFromRecno", {|Self, aSelected | ( ( Self ) ), ( iif(  !empty( ::oRowSet ), ::oRowSet:UuidFromRecno( aSelected ), {} ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )


   _HB_MEMBER getIdFromRowSet(); oClass:AddInline( "getIdFromRowSet", {|Self | ( ( Self ) ), ( iif(  !empty( ::getRowSet() ), ::getRowSet():fieldGet( ::oModel:cColumnKey ), nil ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )


   _HB_MEMBER getUuidFromRowSet(); oClass:AddInline( "getUuidFromRowSet", {|Self | ( ( Self ) ), ( iif(  !empty( ::getRowSet() ), ::getRowSet():fieldGet( "uuid" ), nil ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER findInRowSet( uValue, cColumn); oClass:AddMethod( "findInRowSet", @SQLBaseController_findInRowSet(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER findByIdInRowSet(); oClass:AddInline( "findByIdInRowSet", {|Self, uValue | ( ( Self ) ), ( iif(  !empty( ::getRowSet() ), ::getRowSet():find( uValue, "id", .T. ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getDialogView(); oClass:AddInline( "getDialogView", {|Self | ( ( Self ) ), ( ::oDialogView ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER DialogViewActivate(); oClass:AddMethod( "DialogViewActivate", @SQLBaseController_DialogViewActivate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER DialogViewEnd(); oClass:AddMethod( "DialogViewEnd", @SQLBaseController_DialogViewEnd(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER isContinuousAppend(); oClass:AddInline( "isContinuousAppend", {|Self | ( ( Self ) ), ( hb_isnumeric( ::uDialogResult ) .AND. ::uDialogResult == 3 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getRepository(); oClass:AddInline( "getRepository", {|Self | ( ( Self ) ), ( ::oRepository ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER Validate(); oClass:AddInline( "Validate", {|Self, cColumn, uValue | ( ( Self ) ), ( iif( !empty( ::oValidator ), ::oValidator:Validate( cColumn, uValue ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER Assert(); oClass:AddInline( "Assert", {|Self, cColumn, uValue | ( ( Self ) ), ( iif( !empty( ::oValidator ), ::oValidator:Assert( cColumn, uValue ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getBrowseView(); oClass:AddInline( "getBrowseView", {|Self | ( ( Self ) ), ( ::oBrowseView ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getBrowse(); oClass:AddInline( "getBrowse", {|Self | ( ( Self ) ), ( if( !empty( ::oBrowseView ), ::oBrowseView:getBrowse(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER refreshBrowseView(); oClass:AddInline( "refreshBrowseView", {|Self | ( ( Self ) ), ( if( !empty( ::oBrowseView ), ::oBrowseView:Refresh(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER isBrowseColumnEdit(); oClass:AddMethod( "isBrowseColumnEdit", @SQLBaseController_isBrowseColumnEdit(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER startBrowse( oCombobox); oClass:AddMethod( "startBrowse", @SQLBaseController_startBrowse(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER restoreBrowseState(); oClass:AddMethod( "restoreBrowseState", @SQLBaseController_restoreBrowseState(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER isUserAccess(); oClass:AddInline( "isUserAccess", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 1 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserAccess(); oClass:AddInline( "notUserAccess", {|Self | ( ( Self ) ), ( !::isUserAccess() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER isUserAppend(); oClass:AddInline( "isUserAppend", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 2 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserAppend(); oClass:AddInline( "notUserAppend", {|Self | ( ( Self ) ), ( !::isUserAppend() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER isUserDuplicate(); oClass:AddInline( "isUserDuplicate", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 2 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserDuplicate(); oClass:AddInline( "notUserDuplicate", {|Self | ( ( Self ) ), ( !::isUserDuplicate() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER isUserEdit(); oClass:AddInline( "isUserEdit", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 4 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserEdit(); oClass:AddInline( "notUserEdit", {|Self | ( ( Self ) ), ( !::isUserEdit() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER isUserDelete(); oClass:AddInline( "isUserDelete", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 16 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserDelete(); oClass:AddInline( "notUserDelete", {|Self | ( ( Self ) ), ( !::isUserDelete() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER isUserZoom(); oClass:AddInline( "isUserZoom", {|Self | ( ( Self ) ), ( nAnd( ::nLevel, 8 ) <> 0 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER notUserZoom(); oClass:AddInline( "notUserZoom", {|Self | ( ( Self ) ), ( !::isUserZoom() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER getImage(); oClass:AddInline( "getImage", {|Self, cResolution | ( ( Self ) ), ( iif( hhaskey( ::hImage, cResolution ), hget( ::hImage, cResolution ), "" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER setTitle(); oClass:AddInline( "setTitle", {|Self, cTitle | ( ( Self ) ), ( ::cTitle := cTitle ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getTitle(); oClass:AddInline( "getTitle", {|Self | ( ( Self ) ), ( ::cTitle ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER setMode(); oClass:AddInline( "setMode", {|Self, nMode | ( ( Self ) ), ( ::nMode := nMode ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getMode(); oClass:AddInline( "getMode", {|Self | ( ( Self ) ), ( ::nMode ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER Append(); oClass:AddMethod( "Append", @SQLBaseController_Append(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER setAppendMode(); oClass:AddInline( "setAppendMode", {|Self | ( ( Self ) ), ( ::setMode( 1 ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isAppendMode(); oClass:AddInline( "isAppendMode", {|Self | ( ( Self ) ), ( ::nMode == 1 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isNotAppendMode(); oClass:AddInline( "isNotAppendMode", {|Self | ( ( Self ) ), ( ::nMode <> 1 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Duplicate(); oClass:AddMethod( "Duplicate", @SQLBaseController_Duplicate(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER setDuplicateMode(); oClass:AddInline( "setDuplicateMode", {|Self | ( ( Self ) ), ( ::setMode( 4 ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isDuplicateMode(); oClass:AddInline( "isDuplicateMode", {|Self | ( ( Self ) ), ( ::nMode == 4 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER isAppendOrDuplicateMode(); oClass:AddInline( "isAppendOrDuplicateMode", {|Self | ( ( Self ) ), ( ::isAppendMode() .OR. ::isDuplicateMode() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Edit(); oClass:AddMethod( "Edit", @SQLBaseController_Edit(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER EditReturn(); oClass:AddMethod( "EditReturn", @SQLBaseController_EditReturn(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER setEditMode(); oClass:AddInline( "setEditMode", {|Self | ( ( Self ) ), ( ::setMode( 2 ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isEditMode(); oClass:AddInline( "isEditMode", {|Self | ( ( Self ) ), ( ::nMode == 2 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isNotEditMode(); oClass:AddInline( "isNotEditMode", {|Self | ( ( Self ) ), ( ::nMode <> 2 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Zoom(); oClass:AddMethod( "Zoom", @SQLBaseController_Zoom(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER setZoomMode(); oClass:AddInline( "setZoomMode", {|Self | ( ( Self ) ), ( ::setMode( 3 ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isZoomMode(); oClass:AddInline( "isZoomMode", {|Self | ( ( Self ) ), ( ::nMode == 3 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER isNotZoomMode(); oClass:AddInline( "isNotZoomMode", {|Self | ( ( Self ) ), ( ::nMode <> 3 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Delete(); oClass:AddMethod( "Delete", @SQLBaseController_Delete(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
      _HB_MEMBER priorRecnoToDelete( aSelectedRecno); oClass:AddMethod( "priorRecnoToDelete", @SQLBaseController_priorRecnoToDelete(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER dialgOkAndGoTo(); oClass:AddInline( "dialgOkAndGoTo", {|Self | ( ( Self ) ), ( ::uDialogResult == 6 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER dialgOkAndDown(); oClass:AddInline( "dialgOkAndDown", {|Self | ( ( Self ) ), ( ::uDialogResult == 4 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER dialgOkAndUp(); oClass:AddInline( "dialgOkAndUp", {|Self | ( ( Self ) ), ( ::uDialogResult == 5 ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER postEdit( nId); oClass:AddMethod( "postEdit", @SQLBaseController_postEdit(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER beginTransactionalMode(); oClass:AddInline( "beginTransactionalMode", {|Self | ( ( Self ) ), ( if( ::lTransactional, getSQLDatabase():BeginTransaction(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER commitTransactionalMode(); oClass:AddInline( "commitTransactionalMode", {|Self | ( ( Self ) ), ( if( ::lTransactional, getSQLDatabase():Commit(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER rollbackTransactionalMode(); oClass:AddInline( "rollbackTransactionalMode", {|Self | ( ( Self ) ), ( if( ::lTransactional, getSQLDatabase():Rollback(), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER setEvents( aEvents, bEvent); oClass:AddMethod( "setEvents", @SQLBaseController_setEvents(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER setEvent(); oClass:AddInline( "setEvent", {|Self, cEvent, bEvent | ( ( Self ) ), ( if( !empty( ::oEvents ), ::oEvents:set( cEvent, bEvent ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER fireEvent(); oClass:AddInline( "fireEvent", {|Self, cEvent | ( ( Self ) ), ( if( !empty( ::oEvents ), ::oEvents:fire( cEvent ), ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER onKeyChar() ; oClass:AddVirtual( "onKeyChar" )



   _HB_MEMBER setFastReport( oFastReport, cTitle, cSentence, cColumns); oClass:AddMethod( "setFastReport", @SQLBaseController_setFastReport(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER setDirectory(); oClass:AddInline( "setDirectory", {|Self, cDirectory | ( ( Self ) ), ( ::cDirectory := cDirectory ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getDirectory(); oClass:AddInline( "getDirectory", {|Self | ( ( Self ) ), ( ::cDirectory ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER loadDocuments(); oClass:AddMethod( "loadDocuments", @SQLBaseController_loadDocuments(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER load(); oClass:AddInline( "load", {|Self | ( ( Self ) ), ( ::oExportableController:load() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER save(); oClass:AddInline( "save", {|Self | ( ( Self ) ), ( ::oExportableController:save() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setSelectSend(); oClass:AddInline( "setSelectSend", {|Self, lSelect | ( ( Self ) ), ( ::oExportableController:setSelectSend( lSelect ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getSelectSend(); oClass:AddInline( "getSelectSend", {|Self | ( ( Self ) ), ( ::oExportableController:getSelectSend() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setSelectRecive(); oClass:AddInline( "setSelectRecive", {|Self, lSelect | ( ( Self ) ), ( ::oExportableController:setSelectRecive( lSelect ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getSelectRecive(); oClass:AddInline( "getSelectRecive", {|Self | ( ( Self ) ), ( ::oExportableController:getSelectRecive() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER createData(); oClass:AddInline( "createData", {|Self | ( ( Self ) ), ( ::buildNotSentJson(), ::zipNotSentJson() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER restoreData(); oClass:AddInline( "restoreData", {|Self, oInternet | ( ( Self ) ), ( ::setSentFromFetch() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER sendData(); oClass:AddInline( "sendData", {|Self, oInternet | ( ( Self ) ), ( ::oExportableController:isSendData( oInternet ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER validColumnBrowse( uValue, nKey, oModel, cFieldName); oClass:AddMethod( "validColumnBrowse", @SQLBaseController_validColumnBrowse(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setView(); oClass:AddInline( "setView", {|Self, oView | ( ( Self ) ), ( ::oView := oView ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER getView(); oClass:AddInline( "getView", {|Self | ( ( Self ) ), ( if( empty( ::oView ), ::oDialogView, ::oView ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS SQLBaseController ;



static FUNCTION SQLBaseController_New( oSenderController ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   ::oSenderController                                := oSenderController

   ::oEvents                                          := Events():New()

   ::oRowSet                                          := SQLRowSet():New( self )

   ::oExportableController                            := ExportableController():New( self )

RETURN ( self )



static FUNCTION SQLBaseController_End( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if !empty( ::oEvents )
      ::oEvents:End()
      ::oEvents   := nil
   end

   if !empty( ::oRowSet )
      ::oRowSet:End()
      ::oRowSet   := nil
   end

   Self           := nil

RETURN ( nil )



static FUNCTION SQLBaseController_isBrowseColumnEdit( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local oSelectedColumn

   if !empty( ::oBrowseView )

      oSelectedColumn   := ::oBrowseView:getSelectedCol()

      if !empty( oSelectedColumn )
         RETURN ( oSelectedColumn:nEditType <> 0 )
      end

   end

RETURN ( .F. )



static FUNCTION SQLBaseController_startBrowse( oCombobox ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local oColumn

   if empty( ::oDialogView:getoBrowse() )
      RETURN ( Self )
   end

   if (!empty( oCombobox ) )
      oCombobox:SetItems( ::oDialogView:getoBrowse():getColumnHeaders() )
   endif

   ::restoreBrowseState()

   oColumn        := ::oDialogView:getoBrowse():getColumnOrder( ::oModel:cColumnOrder )
   if empty( oColumn )
      RETURN ( Self )
   end

   if (!empty( oCombobox ) )
      oCombobox:set( oColumn:cHeader )
   endif

   ::oDialogView:getoBrowse():selectColumnOrder( oColumn, ::oModel:cOrientation )

RETURN ( Self )



static FUNCTION SQLBaseController_restoreBrowseState( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if empty( ::oDialogView:getoBrowse() )
      RETURN ( Self )
   end

   if empty( ::oDialogView:getBrowseState() )
      RETURN ( Self )
   end

   ::oDialogView:getoBrowse():restoreState( ::oDialogView:getBrowseState() )

RETURN ( Self )



static FUNCTION SQLBaseController_Append( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local nId
   local uResult
   local lAppend     := .T.

   if ::notUserAppend()
      msgStop( "Acceso no permitido." )
      RETURN ( .F. )
   end

   if isFalse( ::fireEvent( "appending" ) )
      RETURN ( .F. )
   end

   ::setAppendMode()

   while .T.

      ::beginTransactionalMode()

      ::saveRowSetRecno()

      ::oModel:loadBlankBuffer()

      ::fireEvent( "openingDialog" )

      if ::DialogViewActivate()

         ::fireEvent( "closedDialog" )

         nId         := ::oModel:insertBuffer()

         ::commitTransactionalMode()

         if !empty( nId )
            ::refreshRowSetAndFindId( nId )
         else
            ::refreshRowSet()
         end

         ::refreshBrowseView()

         ::fireEvent( "appended" )

         if ::isContinuousAppend()
            loop
         else
            exit
         end

      else

         lAppend     := .F.

         ::fireEvent( "cancelAppended" )

         ::restoreRowSetRecno()

         ::rollbackTransactionalMode()

         exit

      end

   end

   ::fireEvent( "exitAppended" )

RETURN ( lAppend )



static FUNCTION SQLBaseController_Duplicate( nId, uuid ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local lDuplicate  := .T.

   if empty( nId )
      nId            := ::getIdFromRowSet()
   end

   if empty( nId )
      RETURN ( .F. )
   end

   if empty( uuid )
      uuid           := ::getUuidFromRowSet()
   end

   if ::notUserDuplicate()
      msgStop( "Acceso no permitido." )
      RETURN ( .F. )
   end

   if isFalse( ::fireEvent( "duplicating" ) )
      RETURN ( .F. )
   end

   ::setDuplicateMode()

   ::beginTransactionalMode()

   ::saveRowSetRecno()

   ::oModel:loadDuplicateBuffer( nId, uuid )

   ::fireEvent( "openingDialog" )

   if ::DialogViewActivate()

      ::fireEvent( "closedDialog" )

      nId            := ::oModel:insertBuffer()

      ::commitTransactionalMode()

      if !empty( nId )
         ::refreshRowSetAndFindId( nId )
      end

      ::fireEvent( "duplicated" )

      ::refreshBrowseView()

   else

      lDuplicate     := .F.

      ::restoreRowSetRecno()

      ::fireEvent( "cancelDuplicated" )

      ::rollbackTransactionalMode()

   end

   ::fireEvent( "exitDuplicated" )

RETURN ( lDuplicate )



static FUNCTION SQLBaseController_EditReturn( nId ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if ::isBrowseColumnEdit()
      RETURN ( .F. )
   end

RETURN ( ::Edit( nId ) )



static FUNCTION SQLBaseController_Edit( nId ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local lEdit    := .T.

   if empty( nId )
      nId         := ::getIdFromRowSet()
   end

   if empty( nId )
      RETURN ( .F. )
   end

   if ::notUserEdit()
      msgStop( "Acceso no permitido." )
      RETURN ( .F. )
   end

   if isFalse( ::fireEvent( "editing" ) )
      RETURN ( .F. )
   end

   ::setEditMode()

   ::beginTransactionalMode()

   ::oModel:loadCurrentBuffer( nId )

   ::fireEvent( "openingDialog" )

   if ::DialogViewActivate()

      ::fireEvent( "closedDialog" )

      ::oModel:updateBuffer()

      ::commitTransactionalMode()

      ::refreshRowSetAndFindId( nId )

      ::refreshBrowseView()

      ::fireEvent( "edited" )

   else

      lEdit       := .F.

      ::fireEvent( "cancelEdited" )

      ::rollbackTransactionalMode()

   end

   ::fireEvent( "exitEdited" )

   ::postEdit()

RETURN ( lEdit )



static FUNCTION SQLBaseController_postEdit( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   do case
      case ::dialgOkAndGoTo()
         if ::refreshRowSetAndFindId( ::oDialogView:idGoTo )
            ::Edit()
         else
            msgStop( "El identificador " + alltrim( str( ::oDialogView:idGoTo ) ) + " no puede ser localizado" )
         end

      case ::dialgOkAndDown()
         ::goDownRowSet()
         ::Edit()

      case ::dialgOkAndUp()
         ::goUpRowSet()
         ::Edit()
   end

RETURN ( self )



static FUNCTION SQLBaseController_Zoom( nId ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if empty( nId )
      nId         := ::getIdFromRowSet()
   end

   if empty( nId )
      RETURN ( .F. )
   end

   if ::notUserZoom()
      msgStop( "Acceso no permitido." )
      RETURN ( Self )
   end

   if isFalse( ::fireEvent( "zooming" ) )
      RETURN ( .F. )
   end

   ::setZoomMode()

   ::oModel:loadCurrentBuffer( nId )

   ::oDialogView:Activating()

   ::fireEvent( "openingDialog" )

   ::oDialogView:Activate()

   ::fireEvent( "closedDialog" )

   ::oDialogView:Activated()

   ::fireEvent( "zoomed" )

   ::fireEvent( "exitZoomed" )

RETURN ( .T. )



static FUNCTION SQLBaseController_DialogViewActivate( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if empty( ::oDialogView )
      RETURN ( .F. )
   end

   ::oDialogView:Activating()

   ::uDialogResult         := ::oDialogView:Activate()

   if hb_islogical( ::uDialogResult )
      RETURN ( ::uDialogResult )
   end

   if hb_isnumeric( ::uDialogResult ) .AND. ( ::uDialogResult <> 2 )
      RETURN ( .T. )
   end

   ::oDialogView:Activated()

RETURN ( .F. )



static FUNCTION SQLBaseController_DialogViewEnd( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if !empty( ::oDialogView )
      ::oDialogView:EndActivate()
   end

RETURN ( .F. )



static FUNCTION SQLBaseController_Delete( aSelectedRecno ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local lDelete        := .F.
   local cNumbersOfDeletes

   if ::notUserDelete()
      msgStop( "Acceso no permitido" )
      RETURN ( .F. )
   end

   if !hb_isarray( aSelectedRecno )
      RETURN ( .F. )
   end

   if len( aSelectedRecno ) == 0
      RETURN ( .F. )
   end

   if len( aSelectedRecno ) == 1 .AND. atail( aSelectedRecno ) == 0
      RETURN ( .F. )
   end

   if isFalse( ::fireEvent( "deleting" ) )
      RETURN ( .F. )
   end

   if len( aSelectedRecno ) > 1
      cNumbersOfDeletes := alltrim( str( len( aSelectedRecno ), 3 ) ) + " registros?"
   else
      cNumbersOfDeletes := "el registro en curso?"
   end

   ::fireEvent( "openingConfirmDelete" )

   if RolesModel():getRolNoConfirmacionEliminacion( Auth():rolUuid() ) .OR. msgNoYes( "¿Desea eliminar " + cNumbersOfDeletes, "Confirme eliminación" )

      ::fireEvent( "deletingSelection" )

      ::oModel:deleteSelection( ::getIdFromRecno( aSelectedRecno ), ::getUuidFromRecno( aSelectedRecno ) )

      ::fireEvent( "deletedSelection" )

      ::gotoRowSetRecno( ::priorRecnoToDelete( aSelectedRecno ) )

      ::refreshRowSet()

      ::refreshBrowseView()

      lDelete           := .T.

   else

      ::fireEvent( "cancelDeleted" )

   end

   ::fireEvent( "exitDeleted" )

RETURN ( lDelete )



static FUNCTION SQLBaseController_priorRecnoToDelete( aSelectedRecno ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   aSelectedRecno       := asort( aSelectedRecno, , , {|x,y| x > y } )

   if ( atail( aSelectedRecno ) > 1 )
      RETURN ( atail( aSelectedRecno ) - 1 )
   end

RETURN ( atail( aSelectedRecno ) )



static FUNCTION SQLBaseController_changeModelOrderAndOrientation( cOrderBy, cOrientation ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local nId

   if empty(::oRowSet)
      RETURN ( self )
   end

   nId                  := ::oRowSet:fieldGet( ::getModelColumnKey() )

   ::oModel:setFind( "" )

   ::oRowSet:build( ::oModel:getSelectSentence( cOrderBy, cOrientation ) )

   ::oRowSet:findId( nId )

RETURN ( self )



static FUNCTION SQLBaseController_findInModel( uValue ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   ::oModel:setFind( uValue )

   ::oRowSet:build( ::oModel:getSelectSentence() )

RETURN ( ::oRowSet:RecCount() )



static FUNCTION SQLBaseController_findInRowSet( uValue, cColumn ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   if empty( ::oRowSet )
      RETURN ( .F. )
   end

RETURN ( ::oRowSet:findString( uValue, cColumn ) )



static FUNCTION SQLBaseController_setEvents( aEvents, bEvent ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

RETURN ( aeval( aEvents, {|cEvent| ::setEvent( cEvent, bEvent ) } ) )



static FUNCTION SQLBaseController_setFastReport( oFastReport, cTitle, cSentence, cColumns ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local oRowSet

   if empty( oFastReport )
      RETURN ( Self )
   end

   If( cColumns == nil, cColumns := ::oModel:getSerializeColumns(), ) ;

   oRowSet           := ::oModel:newRowSet( cSentence )

   if empty( oRowSet )
      RETURN ( Self )
   end







   oFastReport:setUserDataSet(   cTitle, cColumns, {|| oRowSet:gotop()  }, {|| oRowSet:skip(1)  }, {|| oRowSet:skip(-1) }, {|| oRowSet:eof()    }, {|nField| msgalert( nField ), oRowSet:fieldGet( nField ) } )


RETURN ( Self )



static FUNCTION SQLBaseController_loadDocuments( ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local aFiles   := directory( ::getDirectory() + "*.fr3" )

   ::aDocuments   := {}

   if empty( aFiles )
      RETURN ( ::aDocuments )
   end

   aeval( aFiles, {|aFile| aadd( ::aDocuments, aFile[ 1 ] ) } )

RETURN ( ::aDocuments )



static FUNCTION SQLBaseController_validColumnBrowse( oCol, uValue, nKey, oModel, cFieldName ) ; local Self AS CLASS SQLBaseController := QSelf() AS CLASS SQLBaseController

   local uuid              := ""

   if !hb_isnumeric( nKey ) .OR. ( nKey == 27 ) .OR. hb_isnil( uValue )
      RETURN ( .T. )
   end

   if hb_ishash( uValue )
      uuid          := hGet( uValue, "uuid" )
   end

   if hb_ischar( uValue )
      uuid          := oModel:getUuidWhereCodigo( alltrim( uValue ) )
   end

   if empty( uuid )
      msgStop( "valor no encontrado." )
      RETURN .T.
   end

   ::oModel:updateFieldWhereId( ::getRowSet():fieldGet( "id" ), cFieldName, uuid )

   ::RefreshRowSet()

RETURN ( .T. )
