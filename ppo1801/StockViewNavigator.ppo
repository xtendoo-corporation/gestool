#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 4 ".\Prg\tablet\view\terceros\StockViewNavigator.prg"
_HB_CLASS StockViewNavigator ; function StockViewNavigator ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "StockViewNavigator", iif( .T., { @ViewSearchNavigator() }, { @HBObject() } ), @StockViewNavigator() ) ) ;

   _HB_MEMBER { cArticulo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cArticulo"}, .F. )
   _HB_MEMBER { cAlmacen } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cAlmacen"}, .F. )

   _HB_MEMBER Resource(); oClass:AddMethod( "Resource", @StockViewNavigator_Resource(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setItemsBusqueda(); oClass:AddInline( "setItemsBusqueda", {|Self | ( ( Self ) ), ( ::hashItemsSearch := { "Nombre" => "Nombre", "Código" => "Codigo" } ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setColumns(); oClass:AddMethod( "setColumns", @StockViewNavigator_setColumns(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER botonesAcciones(); oClass:AddInline( "botonesAcciones", {|Self | ( ( Self ) ), ( self ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER initDialog(); oClass:AddMethod( "initDialog", @StockViewNavigator_initDialog(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER validDialog(); oClass:AddMethod( "validDialog", @StockViewNavigator_validDialog(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER setSubTitle( cCodArt, cCodAlm); oClass:AddMethod( "setSubTitle", @StockViewNavigator_setSubTitle(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineSubTitulo(); oClass:AddMethod( "defineSubTitulo", @StockViewNavigator_defineSubTitulo(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS StockViewNavigator ;



static FUNCTION StockViewNavigator_Resource( ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator

   ::oDlg                     := TDialog():New( 1, 5, 40, 100, "gestool TABLET",,, .F., ::Style,, ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ),,, .F.,, oGridFont(),,,, .F.,, "oDlg" )

   ::defineTitulo()

   if ::lSelectorMode
      ::defineAceptarCancelar()
   else
      ::defineSalir()
   end

   ::botonesMovimientoBrowse()

   ::defineSubTitulo()

   ::browseArray()

   ::oDlg:bResized            := {|| ::resizeDialog() }

   ::oDlg:Activate( , , ,.T., {|| ::validDialog() },, {|| ::initDialog() } )

   ::endDialog()

Return ( self )



static FUNCTION StockViewNavigator_initDialog( ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator

   GridMaximize( ::oDlg )

   ::refreshBrowse()

Return ( self )



static FUNCTION StockViewNavigator_validDialog( ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator

Return ( .T. )



static FUNCTION StockViewNavigator_setColumns( ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator

   ::setBrowseConfigurationName( "grid_stock" )

   with object ( ::oBrowse:AddCol() )
      :cHeader          := "Lote"
      :nWidth           := 175
      :bStrData         := {|| if( !Empty( ::oBrowse:aArrayData ), hGet( ::oBrowse:aArrayData[ ::oBrowse:nArrayAt ], "lote" ), "" ) }
   end

   with object ( ::oBrowse:AddCol() )
      :cHeader          := "Unidades"
      :nWidth           := 175
      :bEditValue       := {|| if( !Empty( ::oBrowse:aArrayData ), hGet( ::oBrowse:aArrayData[ ::oBrowse:nArrayAt ], "unidades" ), 0 ) }
      :cEditPicture     := MasUnd()
      :nDataStrAlign    := 1
      :nHeadStrAlign    := 1
   end

Return ( self )



static FUNCTION StockViewNavigator_setSubTitle( cCodArt, cCodAlm ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator

   ::cArticulo := AllTrim( cCodArt ) + "-" + Capitalize( RetFld( cCodArt, D():Articulos( ::oSender:nView ) ) )
   ::cAlmacen  := AllTrim( cCodAlm ) + "-" + Capitalize( RetFld( cCodAlm, D():Almacen( ::oSender:nView ) ) )

Return ( self )



static FUNCTION StockViewNavigator_defineSubTitulo( ) ; local Self AS CLASS StockViewNavigator := QSelf() AS CLASS StockViewNavigator











   TGridSay():Build(    {  "nRow"      => 45, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| ::cArticulo }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 6, ::oDlg ) }, "nHeight"   => 42, "lDesign"   => .F. } )











   TGridSay():Build(    {  "nRow"      => 75, "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| ::cAlmacen }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 6, ::oDlg ) }, "nHeight"   => 42, "lDesign"   => .F. } )

Return ( self )
