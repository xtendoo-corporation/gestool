#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 8 ".\.\Prg\TSpecialInfoCliente.prg"
_HB_CLASS TSpecialInfoCliente ; function TSpecialInfoCliente ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "TSpecialInfoCliente", iif( .F., { }, { @HBObject() } ), @TSpecialInfoCliente() ) ) ;

   _HB_MEMBER { cCodigoCliente } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCodigoCliente"}, .F. )
   _HB_MEMBER { cNombreCliente } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cNombreCliente"}, .F. )
   _HB_MEMBER { cCodigoArticulo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCodigoArticulo"}, .F. )

   _HB_MEMBER New( cCodigoCliente, cNombreCliente, cCodigoArticulo); oClass:AddMethod( "New", @TSpecialInfoCliente_New(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Resource(); oClass:AddMethod( "Resource", @TSpecialInfoCliente_Resource(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER isSelectSATFromCliente(); oClass:AddInline( "isSelectSATFromCliente", {|Self | ( ( Self ) ), ( TDataCenter():selectSATFromClient( ::cCodigoCliente, , ::cCodigoArticulo ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Run( cCodigoCliente, cNombreCliente, cCodigoArticulo); oClass:AddMethod( "Run", @TSpecialInfoCliente_Run(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS TSpecialInfoCliente ;



static FUNCTION TSpecialInfoCliente_New( cCodigoCliente, cNombreCliente, cCodigoArticulo ) ; local Self AS CLASS TSpecialInfoCliente := QSelf() AS CLASS TSpecialInfoCliente

   ::cCodigoCliente    := cCodigoCliente
   ::cNombreCliente    := cNombreCliente
   ::cCodigoArticulo   := cCodigoArticulo

Return ( Self )



static FUNCTION TSpecialInfoCliente_Run( cCodigoCliente, cNombreCliente, cCodigoArticulo ) ; local Self AS CLASS TSpecialInfoCliente := QSelf() AS CLASS TSpecialInfoCliente

   ::New( cCodigoCliente, cNombreCliente, cCodigoArticulo )

   if ::isSelectSATFromCliente()
      ::Resource()
   end

Return ( Self )



static FUNCTION TSpecialInfoCliente_Resource( ) ; local Self AS CLASS TSpecialInfoCliente := QSelf() AS CLASS TSpecialInfoCliente

   local oDlg
   local oBmp
   local oBrwCliente

   oDlg = TDialog():New(,,,, "Información del cliente : " + Rtrim( ::cCodigoCliente ) + " - " + Rtrim( ::cNombreCliente ), "Info_5",, .F.,,,,,, .F.,,,,,, .F.,, "oDlg", nil, )

   oBmp := TBitmap():ReDefine( 500, "gc_businessman_48",, oDlg,,, .F., .F.,,, .F.,,, .T. )

      oBrwCliente                       := IXBrowse():New( oDlg )

      oBrwCliente:bClrSel               := {|| { 0, ( 229 + ( 229 * 256 ) + ( 229 * 65536 ) ) } }
      oBrwCliente:bClrSelFocus          := {|| { 0, ( 167 + ( 205 * 256 ) + ( 240 * 65536 ) ) } }

      oBrwCliente:nMarqueeStyle         := 6
      oBrwCliente:cName                 := "Máquinas en informe de clientes"

      oBrwCliente:setTree( TDataCenter():treeProductFromSAT(), { "gc_navigate_minus_16", "gc_navigate_plus_16" } )

      if len( oBrwCliente:aCols ) > 0
         oBrwCliente:aCols[ 1 ]:cHeader := ""
         oBrwCliente:aCols[ 1 ]:nWidth  := 20
      end

      oBrwCliente:bLDblClick  := {|| EdtSatCli( oBrwCliente:oTreeItem:Cargo[ "cSerSat" ] + str( oBrwCliente:oTreeItem:Cargo[ "nNumSat" ], 9 ) + oBrwCliente:oTreeItem:Cargo[ "cSufSat" ] ) }

      oBrwCliente:CreateFromResource( 300 )

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Artículo"
         :bEditValue       := {|| alltrim( oBrwCliente:oTreeItem:Cargo[ "cRef" ] ) + " - " + alltrim( oBrwCliente:oTreeItem:Cargo[ "Nombre" ] ) }
         :nWidth           := 260
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "S.A.T."
         :bEditValue       := {|| oBrwCliente:oTreeItem:Cargo[ "cSerSat" ] + "/" + alltrim( str( oBrwCliente:oTreeItem:Cargo[ "nNumSat" ] ) ) }
         :nDataStrAlign    := 0
         :nHeadStrAlign    := 0
         :nWidth           := 120
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Dlg."
         :bEditValue       := {|| oBrwCliente:oTreeItem:Cargo[ "cSufSat" ] }
         :nDataStrAlign    := 0
         :nHeadStrAlign    := 0
         :lHide            := .T.
         :nWidth           := 40
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Fecha"
         :bEditValue       := {|| oBrwCliente:oTreeItem:Cargo[ "dFecSat" ] }
         :nDataStrAlign    := 0
         :nHeadStrAlign    := 0
         :nWidth           := 80
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Operario"
         :bEditValue       := {|| oBrwCliente:oTreeItem:Cargo[ "cCodOpe" ] + " - " + oBrwCliente:oTreeItem:Cargo[ "cNomTra" ] }
         :nWidth           := 170
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Estado"
         :bEditValue       := {|| alltrim( oBrwCliente:oTreeItem:Cargo[ "cCodEst" ] ) }
         :bStrData         := {|| alltrim( oBrwCliente:oTreeItem:Cargo[ "cCodEst" ] ) + " - " + oBrwCliente:oTreeItem:Cargo[ "cNombre" ] }
         :nWidth           := 170
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Situación"
         :bEditValue       := {|| alltrim( oBrwCliente:oTreeItem:Cargo[ "cSituac" ] ) }
         :nWidth           := 100
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Ubicación"
         :bEditValue       := {|| alltrim( oBrwCliente:oTreeItem:Cargo[ "cDesUbi" ] ) }
         :nWidth           := 130
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Contador"
         :bEditValue       := {|| if( !Empty( oBrwCliente:oTreeItem:Cargo[ "nCntAct" ] ), Trans( oBrwCliente:oTreeItem:Cargo[ "nCntAct" ], "99999999999" ), "" ) }
         :nWidth           := 130
         :nDataStrAlign    := 1
         :nHeadStrAlign    := 1
         :lHide            := .T.
      end

      with object ( oBrwCliente:addCol() )
         :cHeader          := "Observaciones"
         :bEditValue       := {|| oBrwCliente:oTreeItem:Cargo[ "mObsLin" ] }
         :nWidth           := 150
         :lHide            := .T.
      end

      oDlg:bStart     := {|| oBrwCliente:Load() }

   oDlg:Activate( oDlg:bLClicked, oDlg:bMoved, oDlg:bPainted, .T.,,,, oDlg:bRClicked,,, )

   if !Empty( oBmp )
      oBmp:End()
   end

RETURN ( Self )
