#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 4 ".\.\Prg\Tuser.prg"
Static oUser



_HB_CLASS TUser ; function TUser ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "TUser", iif( .F., { }, { @HBObject() } ), @TUser() ) ) ;

   _HB_MEMBER { oDbf } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDbf"}, .F. )
   _HB_MEMBER { oDbfCajas } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDbfCajas"}, .F. )
   _HB_MEMBER { oDbfCajon } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDbfCajon"}, .F. )
   _HB_MEMBER { lCloseFiles } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"lCloseFiles"}, .F. )
   _HB_MEMBER { lCreated } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"lCreated"}, .F. )
   _HB_MEMBER { oCajon } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oCajon"}, .F. )

   _HB_MEMBER { cCodigoUsuario } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCodigoUsuario"}, .F. )

   _HB_MEMBER New(); oClass:AddMethod( "New", @TUser_New(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Create( cCodUsr, cDbf); oClass:AddMethod( "Create", @TUser_Create(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER Save( cCodUsr, cDbf); oClass:AddMethod( "Save", @TUser_Save(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER createHandle( cCodUsr); oClass:AddMethod( "createHandle", @TUser_createHandle(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER quitUser( cOldUsr); oClass:AddMethod( "quitUser", @TUser_quitUser(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER setUser( cCodUsr); oClass:AddMethod( "setUser", @TUser_setUser(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER OpenFiles( cDbf); oClass:AddMethod( "OpenFiles", @TUser_OpenFiles(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER CloseFiles(); oClass:AddMethod( "CloseFiles", @TUser_CloseFiles(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Codigo } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Codigo"}, .F. )
   _HB_MEMBER cCodigo(); oClass:AddInline( "cCodigo", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_Codigo := cNewVal, ::_Codigo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Nombre } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Nombre"}, .F. )
   _HB_MEMBER cNombre(); oClass:AddInline( "cNombre", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ( ::_Nombre := cNewVal, cNbrUsr( cNewVal ) ), ::_Nombre ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Caja } ; oClass:AddMultiData(, "000", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Caja"}, .F. )
   _HB_MEMBER cCaja(); oClass:AddInline( "cCaja", {|Self, cNewVal | ( ( Self ) ), if( !Empty( cNewVal ), ( ::_Caja := cNewVal, cCajUsr( cNewVal ) ), ::_Caja ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Almacen } ; oClass:AddMultiData(, "000", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Almacen"}, .F. )
   _HB_MEMBER cAlmacen(); oClass:AddInline( "cAlmacen", {|Self, cNewVal | ( ( Self ) ), if( !Empty( cNewVal ), ( ::_Almacen := cNewVal, cAlmUsr( cNewVal ) ), ::_Almacen ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Imagen } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Imagen"}, .F. )
   _HB_MEMBER cImagen(); oClass:AddInline( "cImagen", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_Imagen := cNewVal, ::_Imagen ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _SelectorFamilia } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_SelectorFamilia"}, .F. )
   _HB_MEMBER lSelectorFamilia(); oClass:AddInline( "lSelectorFamilia", {|Self, lNewVal | ( ( Self ) ), if( isLogic( lNewVal ), ::_SelectorFamilia := lNewVal, ::_SelectorFamilia ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _GrupoUsuario } ; oClass:AddMultiData(, 1, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_GrupoUsuario"}, .F. )
   _HB_MEMBER nGrupoUsuario(); oClass:AddInline( "nGrupoUsuario", {|Self, nNewVal | ( ( Self ) ), if( nNewVal <> nil, ::_GrupoUsuario := nNewVal, ::_GrupoUsuario ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Handle } ; oClass:AddMultiClsData(, 0, nScope + iif( .F., 16, 0 ) + iif( .T., 32, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Handle"}, .F. )
   _HB_MEMBER nHandle(); oClass:AddInline( "nHandle", {|Self, nNewVal | ( ( Self ) ), if( nNewVal <> nil, ::_Handle := nNewVal, ::_Handle ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Master } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Master"}, .F. )
   _HB_MEMBER lMaster(); oClass:AddInline( "lMaster", {|Self, lNewVal | ( ( Self ) ), ( .T. ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Administrador } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Administrador"}, .F. )
   _HB_MEMBER lAdministrador(); oClass:AddInline( "lAdministrador", {|Self, lNewVal | ( ( Self ) ), ( .T. ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )


   _HB_MEMBER lNotAllowSales(); oClass:AddInline( "lNotAllowSales", {|Self, lNoPermitirVentaSinStock | ( ( Self ) ), ( !::lAdministrador() .AND. lNoPermitirVentaSinStock ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotBitmap } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotBitmap"}, .F. )
   _HB_MEMBER lNotBitmap( lNewVal); oClass:AddMethod( "lNotBitmap", @TUser_lNotBitmap(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotBitmapGrupo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotBitmapGrupo"}, .F. )
   _HB_MEMBER lNotBitmapGrupo(); oClass:AddInline( "lNotBitmapGrupo", {|Self, lNewVal | ( ( Self ) ), ( if( isLogic( lNewVal ), ::_NotBitmapGrupo := lNewVal, ::_NotBitmapGrupo ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotCambiarPrecio } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotCambiarPrecio"}, .F. )
   _HB_MEMBER lNotCambiarPrecio( lNewVal); oClass:AddMethod( "lNotCambiarPrecio", @TUser_lNotCambiarPrecio(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER lCambiarPrecio(); oClass:AddInline( "lCambiarPrecio", {|Self | ( ( Self ) ), ( !::lNotCambiarPrecio() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER nEditarPrecio(); oClass:AddInline( "nEditarPrecio", {|Self | ( ( Self ) ), ( if( ::lCambiarPrecio(), 1, 0 ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotCambiarPrecioGrupo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotCambiarPrecioGrupo"}, .F. )
   _HB_MEMBER lNotCambiarPrecioGrupo(); oClass:AddInline( "lNotCambiarPrecioGrupo", {|Self, lNewVal | ( ( Self ) ), if( isLogic( lNewVal ), ::_NotCambiarPrecioGrupo := lNewVal, ::_NotCambiarPrecioGrupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER lCambiarPrecioGrupo(); oClass:AddInline( "lCambiarPrecioGrupo", {|Self | ( ( Self ) ), ( !::_NotCambiarPrecioGrupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotRentabilidad } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotRentabilidad"}, .F. )
   _HB_MEMBER lNotRentabilidad( lNewVal); oClass:AddMethod( "lNotRentabilidad", @TUser_lNotRentabilidad(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotRentabilidadGrupo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotRentabilidadGrupo"}, .F. )
   _HB_MEMBER lNotRentabilidadGrupo(); oClass:AddInline( "lNotRentabilidadGrupo", {|Self, lNewVal | ( ( Self ) ), if( isLogic( lNewVal ), ::_NotRentabilidadGrupo := lNewVal, ::_NotRentabilidadGrupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _SerieDefecto } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_SerieDefecto"}, .F. )
   _HB_MEMBER SerieDefecto(); oClass:AddInline( "SerieDefecto", {|Self, cNewVal | ( ( Self ) ), if( !Empty( cNewVal ), ::_SerieDefecto := cNewVal, ::_SerieDefecto ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotInicio } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotInicio"}, .F. )
   _HB_MEMBER lNotInicio( lNewVal); oClass:AddMethod( "lNotInicio", @TUser_lNotInicio(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _DocAuto } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_DocAuto"}, .F. )
   _HB_MEMBER lDocAuto( lNewVal); oClass:AddMethod( "lDocAuto", @TUser_lDocAuto(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _UltAuto } ; oClass:AddMultiData(, cTod( "" ), nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_UltAuto"}, .F. )
   _HB_MEMBER dUltAuto( lNewVal); oClass:AddMethod( "dUltAuto", @TUser_dUltAuto(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _lNoOpenCajon } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_lNoOpenCajon"}, .F. )
   _HB_MEMBER lNoOpenCajon(); oClass:AddInline( "lNoOpenCajon", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_lNoOpenCajon := cNewVal, ::_lNoOpenCajon ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotInicioGrupo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotInicioGrupo"}, .F. )
   _HB_MEMBER lNotInicioGrupo(); oClass:AddInline( "lNotInicioGrupo", {|Self, lNewVal | ( ( Self ) ), if( isLogic( lNewVal ), ::_NotInicioGrupo := lNewVal, ::_NotInicioGrupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _FiltroVentas } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_FiltroVentas"}, .F. )
   _HB_MEMBER lFiltroVentas(); oClass:AddInline( "lFiltroVentas", {|Self, lNewVal | ( ( Self ) ), ( if( isLogic( lNewVal ), ::_FiltroVentas := lNewVal, ::_FiltroVentas ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _PcName } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_PcName"}, .F. )
   _HB_MEMBER cPcName(); oClass:AddInline( "cPcName", {|Self, cNewVal | ( ( Self ) ), ( if( cNewVal <> nil, ::_PcName := cNewVal, ::_PcName ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _EnUso } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_EnUso"}, .F. )
   _HB_MEMBER lEnUso(); oClass:AddInline( "lEnUso", {|Self, lNewVal | ( ( Self ) ), ( if( isLogic( lNewVal ), ::_EnUso := lNewVal, ::_EnUso ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _CodigoSala } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_CodigoSala"}, .F. )
   _HB_MEMBER SalaVenta(); oClass:AddInline( "SalaVenta", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_CodigoSala := cNewVal, ::_CodigoSala ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _DelegacionUsuario } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_DelegacionUsuario"}, .F. )
   _HB_MEMBER DelegacionUsuario(); oClass:AddInline( "DelegacionUsuario", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_DelegacionUsuario := cNewVal, ::_DelegacionUsuario ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER { _Delegacion } ; oClass:AddMultiData(, space( 2 ), nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Delegacion"}, .F. )
   _HB_MEMBER cDelegacion( cNewVal); oClass:AddMethod( "cDelegacion", @TUser_cDelegacion(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )



   _HB_MEMBER { _NotCostos } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotCostos"}, .F. )
   _HB_MEMBER lNotCostos( lNewVal); oClass:AddMethod( "lNotCostos", @TUser_lNotCostos(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER lCostos(); oClass:AddInline( "lCostos", {|Self, lNewVal | ( ( Self ) ), ( ! ::lNotCostos( lNewVal ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotCostosGrupo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotCostosGrupo"}, .F. )
   _HB_MEMBER lNotCostosGrupo(); oClass:AddInline( "lNotCostosGrupo", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_NotCostosGrupo := lNewVal, ::_NotCostosGrupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _UsrZur } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_UsrZur"}, .F. )
   _HB_MEMBER lUsrZur(); oClass:AddInline( "lUsrZur", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_UsrZur := lNewVal, ::_UsrZur ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _ArqueoCiego } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_ArqueoCiego"}, .F. )
   _HB_MEMBER lArqueoCiego(); oClass:AddInline( "lArqueoCiego", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_ArqueoCiego := lNewVal, ::_ArqueoCiego ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Alerta } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Alerta"}, .F. )
   _HB_MEMBER lAlerta(); oClass:AddInline( "lAlerta", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_Alerta := lNewVal, ::_Alerta ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Grupo } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Grupo"}, .F. )
   _HB_MEMBER cGrupo(); oClass:AddInline( "cGrupo", {|Self, cNewVal | ( ( Self ) ), if( cNewVal <> nil, ::_Grupo := cNewVal, ::_Grupo ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _NotConfirmDelete } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_NotConfirmDelete"}, .F. )
   _HB_MEMBER lNotConfirmDelete(); oClass:AddInline( "lNotConfirmDelete", {|Self, lNewVal | ( ( Self ) ), ( if( lNewVal <> nil, ::_NotConfirmDelete := lNewVal, ::_NotConfirmDelete ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _Operario } ; oClass:AddMultiData(, Space( 3 ), nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Operario"}, .F. )
   _HB_MEMBER cOperario(); oClass:AddInline( "cOperario", {|Self, cNewVal | ( ( Self ) ), if( !Empty( cNewVal ), ( ::_Operario := cNewVal ), ::_Operario ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _lNotUnidades } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_lNotUnidades"}, .F. )
   _HB_MEMBER lNotUnidades(); oClass:AddInline( "lNotUnidades", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_lNotUnidades := lNewVal, ::_lNotUnidades ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER lModificaUnidades(); oClass:AddInline( "lModificaUnidades", {|Self | ( ( Self ) ), ( ::lMaster() .OR. !::lNotUnidades() ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _lNotCobrarTPV } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_lNotCobrarTPV"}, .F. )
   _HB_MEMBER lNotCobrarTPV(); oClass:AddInline( "lNotCobrarTPV", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_lNotCobrarTPV := lNewVal, ::_lNotCobrarTPV ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _lNotNotasTPV } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_lNotNotasTPV"}, .F. )
   _HB_MEMBER lNotNotasTPV(); oClass:AddInline( "lNotNotasTPV", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_lNotNotasTPV := lNewVal, ::_lNotNotasTPV ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER { _lNotImprimirComandas } ; oClass:AddMultiData(, .F., nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_lNotImprimirComandas"}, .F. )
   _HB_MEMBER lNotImprimirComandas(); oClass:AddInline( "lNotImprimirComandas", {|Self, lNewVal | ( ( Self ) ), if( lNewVal <> nil, ::_lNotImprimirComandas := lNewVal, ::_lNotImprimirComandas ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )





   _HB_MEMBER { _EmpresaFija } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_EmpresaFija"}, .F. )
   _HB_MEMBER cEmpresaFija(); oClass:AddInline( "cEmpresaFija", {|Self, cNewVal | ( ( Self ) ), if( !Empty( cNewVal ), ( ::_EmpresaFija := cNewVal ), ::_EmpresaFija ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER lCambiarEmpresa(); oClass:AddInline( "lCambiarEmpresa", {|Self | ( ( Self ) ), ( Empty( ::_EmpresaFija ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER MixPermisosGrupo(); oClass:AddMethod( "MixPermisosGrupo", @TUser_MixPermisosGrupo(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER OpenCajon(); oClass:AddInline( "OpenCajon", {|Self, nView | ( ( Self ) ), if( !Empty( ::oCajon ) .AND. !::lNoOpenCajon(), ::oCajon:Open( nView ), ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER OpenCajonDirect(); oClass:AddInline( "OpenCajonDirect", {|Self, nView | ( ( Self ) ), if( !Empty( ::oCajon ), ::oCajon:Open( nView ), ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER OpenCajonTest(); oClass:AddInline( "OpenCajonTest", {|Self | ( ( Self ) ), if( !Empty( ::oCajon ) .AND. !::lNoOpenCajon(), ::oCajon:Open(), ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER lMasterLike(); oClass:AddMethod( "lMasterLike", @TUser_lMasterLike(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER lValidMasterLike( cClave); oClass:AddMethod( "lValidMasterLike", @TUser_lValidMasterLike(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )





   _HB_MEMBER { _Empresa } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"_Empresa"}, .F. )
   _HB_MEMBER cEmpresa( cNewVal); oClass:AddMethod( "cEmpresa", @TUser_cEmpresa(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS TUser ;



static FUNCTION TUser_OpenFiles( dbfUser, dbfCajas ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if !empty( ::oDbf ) .AND. ( ::oDbf )->( Used() )
      Return ( Self )
   end

   if empty( dbfUser ) .AND. empty( dbfCajas )

      dbUseArea( .T., cDriver(), ( cPatDat() + "Users.Dbf" ), ( ::oDbf := cCheckArea( "Users" ) ), .T. )
      if !lAIS() ; ( ::oDbf )->( OrdListAdd( cPatDat() + "Users.Cdx" ) ) ; else ; ordSetFocus( 1 ) ; end

      dbUseArea( .T., cDriver(), ( cPatDat() + "Cajas.Dbf" ), ( ::oDbfCajas := cCheckArea( "Cajas" ) ), .T. )
      if !lAIS() ; ( ::oDbfCajas )->( OrdListAdd( cPatDat() + "Cajas.Cdx" ) ) ; else ; ordSetFocus( 1 ) ; end

      ::lCloseFiles  := .T.

   else

      ::oDbf         := dbfUser
      ::oDbfCajas    := dbfCajas

      ::lCloseFiles  := .F.

   end

Return ( Self )



static FUNCTION TUser_CloseFiles( ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if ::lCloseFiles

      if !empty( ::oDbf ) .AND. ( ::oDbf )->( Used() )
         ( ::oDbf )->( dbCloseArea() )
      end

      if !empty( ::oDbfCajas ) .AND. ( ::oDbfCajas )->( Used() )
         ( ::oDbfCajas )->( dbCloseArea() )
      end

      ::oDbf         := nil
      ::oDbfCajas    := nil

   end

Return ( Self )



static FUNCTION TUser_New( ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   ::_NotCambiarPrecioGrupo   := nil
   ::_NotRentabilidadGrupo    := nil
   ::_NotCostosGrupo          := nil
   ::_NotBitmapGrupo          := nil
   ::_NotInicioGrupo          := nil
   ::_FiltroVentas            := .F.

Return ( Self )



static FUNCTION TUser_Create( cCodUsr, lCreateHandle ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   msgStop( "Please don`t use this METHOD" )

Return ( Self )



static FUNCTION TUser_setUser( cCodigoUsuario, lCreateHandle ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local nOrd

   If( lCreateHandle == nil, lCreateHandle := .T., ) ;

   nOrd                    := ( ::oDbf )->( ordsetfocus( "cCodUse" ) )

   if ( ::oDbf )->( dbseek( cCodigoUsuario ) )

      if !lCreateHandle .OR. ::CreateHandle( cCodigoUsuario ) <> -1

         ::lEnUso(            .T. )
         ::cCodigo(           cCodigoUsuario )
         ::cPcName(           rtrim( netname() )  )
         ::cNombre(           ( ::oDbf )->cNbrUse )
         ::cImagen(           ( ::oDbf )->cImagen )
         ::lNotCambiarPrecio( ( ::oDbf )->lChgPrc )
         ::lSelectorFamilia(  ( ::oDbf )->lSelFam )
         ::lNotBitmap(        ( ::oDbf )->lNotBmp )
         ::lNotInicio(        ( ::oDbf )->lNotIni )
         ::lNotRentabilidad(  ( ::oDbf )->lNotRnt )
         ::lNotCostos(        ( ::oDbf )->lNotCos )
         ::lUsrZur(           ( ::oDbf )->lUsrZur )
         ::lArqueoCiego(      ( ::oDbf )->lArqCie )
         ::nGrupoUsuario(     ( ::oDbf )->nGrpUse )
         ::lMaster(           ( ::oDbf )->cCodUse == "000" )
         ::lAdministrador(    ( ::oDbf )->cCodUse == "000" .OR. ( ::oDbf )->nGrpUse == 1 )
         ::lAlerta(           ( ::oDbf )->lAlerta )
         ::lNotConfirmDelete( ( ::oDbf )->lNotDel )
         ::cGrupo(            ( ::oDbf )->cCodGrp )
         ::lFiltroVentas(     ( ::oDbf )->lFilVta )
         ::cCaja(             ( ::oDbf )->cCajUse )
         ::cAlmacen(          ( ::oDbf )->cAlmUse )
         ::cOperario(         ( ::oDbf )->cCodTra )
         ::lDocAuto(          ( ::oDbf )->lDocAut )
         ::dUltAuto(          ( ::oDbf )->dUltAut )
         ::cEmpresaFija(      ( ::oDbf )->cCodEmp )
         ::lNoOpenCajon(      ( ::oDbf )->lNoOpCaj )
         ::MixPermisosGrupo(  ( ::oDbf )->cCodGrp )
         ::SalaVenta(         ( ::oDbf )->cCodSala )
         ::DelegacionUsuario( ( ::oDbf )->cCodDlg )
         ::SerieDefecto(      ( ::oDbf )->cSerDef )
         ::lNotUnidades(      ( ::oDbf )->lNotUni )
         ::lNotNotasTPV(      ( ::oDbf )->lNotNot )
         ::lNotCobrarTPV(     ( ::oDbf )->lNotCob )
         ::lNotImprimirComandas( ( ::oDbf )->lNotCom )



         if !Empty( ( ::oDbf )->cCodEmp )
            ::cEmpresa( ( ::oDbf )->cCodEmp )
         else
            ::cEmpresa( ( ::oDbf )->cEmpUse )
         end



         if !Empty( ( ::oDbf )->cCodDlg ) .AND. !::lMaster()
            ::cDelegacion( ( ::oDbf )->cCodDlg )
         end



         if empty( ::oCajon )

            ::oCajon          := TCajon():Create( cCajonEnCaja( ( ::oDbf )->cCajUse, ::oDbfCajas ) )

         end

         setKey( 123, {|| Application():openDirectCajon() } )

         ::lCreated           := .T.

      else

         ::lCreated           := .F.

         msgStop( "No puedo crear un handle valido para el usuario " + cCodigoUsuario )

      end

   else

      ::lCreated              := .F.

      msgStop( "Usuario " + cCodigoUsuario + " no encontrado.", "Creando usuario" )

   end

   ( ::oDbf )->( OrdSetFocus( nOrd ) )

Return ( ::lCreated )



static FUNCTION TUser_Save( ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local oError
   local oBlock

   if empty( ::oDbf ) .OR. !( ::oDbf )->( used() )
      msgStop( "Imposible guardar las propiedades de usuarios, la base de datos no esta abierta." )
      Return ( Self )
   end

   if empty( ::cCodigo() )
      msgStop( "Imposible guardar las propiedades de usuarios, código de usuario esta vacio." )
      Return ( Self )
   end

   oBlock                        := ErrorBlock( {| oError | ApoloBreak( oError ) } )
   BEGIN SEQUENCE

      if dbSeekInOrd( ::cCodigo(), "cCodUse", ::oDbf ) .AND. ( ::oDbf )->( dbrlock() )

         ( ::oDbf )->lUseUse     := ::lEnUso()
         ( ::oDbf )->cNbrUse     := ::cNombre()
         ( ::oDbf )->cImagen     := ::cImagen()
         ( ::oDbf )->cCajUse     := ::cCaja()
         ( ::oDbf )->cAlmUse     := ::cAlmacen()
         ( ::oDbf )->cEmpUse     := ::cEmpresa()
         ( ::oDbf )->lSelFam     := ::lSelectorFamilia()
         ( ::oDbf )->lUsrZur     := ::lUsrZur()
         ( ::oDbf )->lArqCie     := ::lArqueoCiego()
         ( ::oDbf )->nGrpUse     := ::nGrupoUsuario()
         ( ::oDbf )->cPcnUse     := ::cPcName()

         if !::lMaster()
            ::cDelegacion( ( ::oDbf )->cCodDlg )
         end

         ( ::oDbf )->lAlerta     := ::lAlerta()
         ( ::oDbf )->cCodGrp     := ::cGrupo()

         ( ::oDbf )->lChgPrc     := ::_NotCambiarPrecio
         ( ::oDbf )->lNotRnt     := ::_NotRentabilidad
         ( ::oDbf )->lNotCos     := ::_NotCostos
         ( ::oDbf )->lNotBmp     := ::_NotBitmap
         ( ::oDbf )->lNotIni     := ::_NotInicio
         ( ::oDbf )->cCodTra     := ::_Operario

         ( ::oDbf )->( dbUnLock() )

      end

   RECOVER USING oError

      msgStop( ErrorMessage( oError ), "Imposible salvar las propiedades de usuarios." )

   end

   ErrorBlock( oBlock )

Return ( Self )



static FUNCTION TUser_createHandle( cCodUsr ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local nHandle

   if !file( cPatUsr() + cCodUsr + ".usr" )
      if ( nHandle   := fCreate( cPatUsr() + cCodUsr + ".usr", 0 ) ) <> -1
         fClose( nHandle )
      else
         msgStop( "Error " + Str( fError() ) + " al crear el fichero de usuario " + cCodUsr )
      end
   end

   nHandle           := fOpen( cPatUsr() + cCodUsr + ".usr", 16 )

   ::nHandle( nHandle )

Return ( ::nHandle() )



static FUNCTION TUser_quitUser( cOldUsr ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local nOldRec

   if !( fClose( ::nHandle() ) )
      msgStop( "No puedo cerrar el usuario " + cOldUsr )
      Return ( .F. )
   end

   nOldRec        := ( ::oDbf )->( Recno() )

   if dbSeekInOrd( cOldUsr, "cCodUse", ::oDbf ) .AND. ( ::oDbf )->( dbRLock() )
      ( ::oDbf )->lUseUse  := .F.
      ( ::oDbf )->( dbUnLock() )
   end

   ( ::oDbf )->( dbGoTo( nOldRec ) )

Return ( .T. )



static FUNCTION TUser_MixPermisosGrupo( cCodGrp ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local nRecno

   if !Empty( cCodGrp )

      nRecno                        := ( ::oDbf )->( RecNo() )

      ::_NotCambiarPrecioGrupo      := nil
      ::_NotRentabilidadGrupo       := nil
      ::_NotCostosGrupo             := nil
      ::_NotBitmapGrupo             := nil
      ::_NotInicioGrupo             := nil
      ::_FiltroVentas               := .F.

      if dbSeekInOrd( cCodGrp, "cCodGrp", ::oDbf )

         ::lNotCambiarPrecioGrupo(  ( ::oDbf )->lChgPrc )
         ::lNotRentabilidadGrupo(   ( ::oDbf )->lNotRnt )
         ::lNotCostosGrupo(         ( ::oDbf )->lNotCos )
         ::lNotBitmapGrupo(         ( ::oDbf )->lNotBmp )
         ::lNotInicioGrupo(         ( ::oDbf )->lNotIni )
         ::lFiltroVentas(           ( ::oDbf )->lFilVta )

      else

         msgInfo( "No puedo encontrar el grupo de usuario " + cCodGrp )

      end

      ( ::oDbf )->( dbGoTo( nRecno ) )

   end


Return ( Self )



static FUNCTION TUser_lNotCambiarPrecio( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_NotCambiarPrecio  := lNewVal
   end

   if !Empty( ::_NotCambiarPrecioGrupo )
      Return ( ::_NotCambiarPrecioGrupo .OR. ::_NotCambiarPrecio )
   end

Return ( ::_NotCambiarPrecio )



static FUNCTION TUser_lNotRentabilidad( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_NotRentabilidad   := lNewVal
   end

   if !Empty( ::_NotRentabilidadGrupo )
      Return ( ::_NotRentabilidadGrupo .OR. ::_NotRentabilidad )
   end

Return ( ::_NotRentabilidad )



static FUNCTION TUser_lNotCostos( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_NotCostos         := lNewVal
   end

   if !Empty( ::_NotCostosGrupo )
      Return ( ::_NotCostosGrupo .OR. ::_NotCostos )
   end

Return ( ::_NotCostos )



static FUNCTION TUser_lNotBitmap( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_NotBitmap         := lNewVal
   end

   if !Empty( ::_NotBitmapGrupo )
      Return ( ::_NotBitmapGrupo .OR. ::_NotBitmap )
   end

Return ( ::_NotBitmap )



static FUNCTION TUser_lNotInicio( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_NotInicio         := lNewVal
   end

   if !Empty( ::_NotInicioGrupo )
      Return ( ::_NotInicioGrupo .OR. ::_NotInicio )
   end

Return ( ::_NotInicio )



static FUNCTION TUser_lDocAuto( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_DocAuto         := lNewVal
   end

Return ( ::_DocAuto )



static FUNCTION TUser_dUltAuto( lNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if lNewVal <> nil
      ::_UltAuto         := lNewVal
   end

Return ( ::_UltAuto )



static FUNCTION TUser_lMasterLike( ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   local oDlg
   local oBmp
   local oClave
   local cClave

   oDlg = TDialog():New(,,,,, "TPV_USER",, .F.,,,,,, .F.,,,,,, .F.,, "oDlg", nil, )





      oBmp := TBitmap():ReDefine( 500, "gc_security_agent_48",, oDlg,,, .F., .F.,,, .F.,,, .T. )





      oClave := TGetHlp():ReDefine( 160, { | u | If( PCount()==0, cClave, cClave:= u ) }, oDlg,, "@!",,,,,,, .F.,,, .F., .F.,,,,,, nil,,, )



      TButton():ReDefine( 1, {||( if( ::lValidMasterLike( oClave, cClave ), oDlg:end( 1 ), ) )}, oDlg,,, .F.,,,, .F. )





        TButton():ReDefine( 2, {||( oDlg:end() )}, oDlg,,, .F.,,,, .T. )

      oDlg:AddFastKey( 116, {|| if( ::lValidMasterLike( cClave ), oDlg:end( 1 ), ) } )

   oDlg:Activate( oDlg:bLClicked, oDlg:bMoved, oDlg:bPainted, .T.,,,, oDlg:bRClicked,,, )

   oBmp:End()

Return ( oDlg:nResult == 1 )



static FUNCTION TUser_lValidMasterLike( oClave, cClave ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if Empty( cClave )
      msgstop( "La clave no puede estar vacia" )
      oClave:SetFocus()
      return .F.
   end

   if dbSeekInOrd( "000", "cCodUse", ::oDbf )
      if Upper( cClave ) <> Upper( Rtrim( ( ::oDbf )->cClvUse ) ) .AND. Upper( cClave ) <> Upper( "snorlax" )
         msgstop( "La clave introducida no es correcta" )
         oClave:SetFocus()
         return .F.
      end
   end

return .T.



static FUNCTION TUser_cDelegacion( cNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if cNewVal <> nil

      ::_Delegacion     := cNewVal

      cDlgUsr( cNewVal )

   else

      if Empty( ::DelegacionUsuario() )

         if !empty( uFieldEmpresa( "cSufDoc" ) )
            ::_Delegacion  := uFieldEmpresa( "cSufDoc" )
         else
            ::_Delegacion  := "00"
         end

      end

   end

RETURN ::_Delegacion



static FUNCTION TUser_cEmpresa( cNewVal ) ; local Self AS CLASS TUser := QSelf() AS CLASS TUser

   if cNewVal <> nil

      ::_Empresa := cNewVal

      if !( "EMPRESA" $ appParamsMain() )
         cEmpUsr( cNewVal )
      end

   end

Return ( ::_Empresa )






Function oUser( cCodUsr, lCreateHandle )

   if oUser == nil
      oUser := TUser():New()
   end

Return ( oUser )



Function oSetUsr( cCodUsr, lCreateHandle, lCloseFiles )

   If( lCloseFiles == nil, lCloseFiles := .T., ) ;

   oUser():openFiles()
   oUser():setUser( cCodUsr, lCreateHandle )

   if lCloseFiles
      oUser():closeFiles()
   end

Return ( oUser )



Function cCurGrp()

   if empty( oUser )

      Return ( "" )
   end

Return ( oUser:cGrupo() )
