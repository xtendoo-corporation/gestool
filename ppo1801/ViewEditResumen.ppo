#line 91 "\fwh1801\include\FiveWin.Ch"
         EXTERNAL FW_GT
















extern errorsys









































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































static aFwStack      := {}
#line 5 ".\Prg\tablet\view\ViewEditResumen.prg"
_HB_CLASS ViewEditResumen ; function ViewEditResumen ( ... ) ; STATIC s_oClass ; LOCAL nScope, oClass, oInstance ; IF s_oClass == NIL .AND. __clsLockDef( @s_oClass ) ; BEGIN SEQUENCE ; nScope := 1 ; ( ( nScope ) ) ; oClass := iif( .F.,, HBClass():new( "ViewEditResumen", iif( .T., { @ViewBase() }, { @HBObject() } ), @ViewEditResumen() ) ) ;

   _HB_MEMBER { oDlg } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oDlg"}, .F. )
   _HB_MEMBER { oSender } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oSender"}, .F. )
   _HB_MEMBER { oBrowse } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oBrowse"}, .F. )
   _HB_MEMBER { oCheckBoxRecargo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oCheckBoxRecargo"}, .F. )
   _HB_MEMBER { oComboRecargo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oComboRecargo"}, .F. )
   _HB_MEMBER { aComboRecargo } ; oClass:AddMultiData(, { "Con recargo Equivalencia", "Sin Recargo Equivalencia" }, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aComboRecargo"}, .F. )
   _HB_MEMBER { cComboRecargo } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cComboRecargo"}, .F. )
   _HB_MEMBER { oCbxImpresora } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oCbxImpresora"}, .F. )
   _HB_MEMBER { aCbxImpresora } ; oClass:AddMultiData(, {}, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"aCbxImpresora"}, .F. )
   _HB_MEMBER { cCbxImpresora } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCbxImpresora"}, .F. )
   _HB_MEMBER { cCodigoCliente } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCodigoCliente"}, .F. )
   _HB_MEMBER { cNombreCliente } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cNombreCliente"}, .F. )
   _HB_MEMBER { oCodigoFormaPago } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oCodigoFormaPago"}, .F. )
   _HB_MEMBER { cCodigoFormaPago } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cCodigoFormaPago"}, .F. )
   _HB_MEMBER { oNombreFormaPago } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oNombreFormaPago"}, .F. )
   _HB_MEMBER { cNombreFormaPago } ; oClass:AddMultiData(, "", nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"cNombreFormaPago"}, .F. )
   _HB_MEMBER { oPorcentajeDescuento } ; oClass:AddMultiData(,, nScope + iif( .F., 16, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ), {"oPorcentajeDescuento"}, .F. )

   _HB_MEMBER New(); oClass:AddMethod( "New", @ViewEditResumen_New(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER Resource(); oClass:AddMethod( "Resource", @ViewEditResumen_Resource(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineBotonesGenerales(); oClass:AddMethod( "defineBotonesGenerales", @ViewEditResumen_defineBotonesGenerales(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER SetCodigoCliente(); oClass:AddInline( "SetCodigoCliente", {|Self, cCodCli | ( ( Self ) ), ( if ( !Empty( cCodCli ), ::cCodigoCliente := cCodCli, ::cCodigoCliente := "" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER SetNombreCliente(); oClass:AddInline( "SetNombreCliente", {|Self, cNomCli | ( ( Self ) ), ( if ( !Empty( cNomCli ), ::cNombreCliente := cNomCli, ::cNombreCliente := "" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineCliente(); oClass:AddMethod( "defineCliente", @ViewEditResumen_defineCliente(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER SetCodigoFormaPago(); oClass:AddInline( "SetCodigoFormaPago", {|Self, cCodPgo | ( ( Self ) ), ( if ( !Empty( cCodPgo ), ::cCodigoFormaPago := cCodPgo, ::cCodigoFormaPago := "" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER SetNombreFormaPago(); oClass:AddInline( "SetNombreFormaPago", {|Self, cNomPgo | ( ( Self ) ), ( if ( !Empty( cNomPgo ), ::cNombreFormaPago := cNomPgo, ::cNombreFormaPago := "" ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineFormaPago(); oClass:AddMethod( "defineFormaPago", @ViewEditResumen_defineFormaPago(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER SetImpresoras(); oClass:AddInline( "SetImpresoras", {|Self, aImpresoras | ( ( Self ) ), ( if ( !Empty( aImpresoras ), ::aCbxImpresora  := aImpresoras, ::aCbxImpresora := {} ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )
   _HB_MEMBER SetImpresoraDefecto(); oClass:AddInline( "SetImpresoraDefecto", {|Self, cImpresora | ( ( Self ) ), ( if ( !Empty( cImpresora ), ::cCbxImpresora   := cImpresora, ::cCbxImpresora := {} ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineBrowseIva(); oClass:AddMethod( "defineBrowseIva", @ViewEditResumen_defineBrowseIva(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineComboImpresion(); oClass:AddMethod( "defineComboImpresion", @ViewEditResumen_defineComboImpresion(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER defineCheckRecargo(); oClass:AddMethod( "defineCheckRecargo", @ViewEditResumen_defineCheckRecargo(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER definePorcentaje(); oClass:AddMethod( "definePorcentaje", @ViewEditResumen_definePorcentaje(), nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

   _HB_MEMBER SetGet(); oClass:AddInline( "SetGet", {|Self, u | ( ( Self ) ), ( hset( ::oSender:hDictionaryMaster, "RecargoEquivalencia", u ) ) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 0 ) + iif( .F., 2048, 0 ) )

oClass:Create() ; ; ALWAYS ; __clsUnlockDef( @s_oClass, oClass ) ; end ; oInstance := oClass:Instance() ; IF __objHasMsg( oInstance, "InitClass" ) ; oInstance:InitClass( ... ) ; END ; RETURN oInstance ; END ; RETURN s_oClass:Instance() AS CLASS ViewEditResumen ;



static FUNCTION ViewEditResumen_New( oSender ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen

   ::oSender   := oSender

Return ( self )



static FUNCTION ViewEditResumen_Resource( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen

   ::resetRow()

   ::oDlg                  := TDialog():New( 1, 5, 40, 100, "gestool TABLET",,, .F., ::Style,, ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ),,, .F.,, oGridFont(),,,, .F.,, "oDlg" )

   ::defineTitulo()

   ::defineBotonesGenerales()

   ::defineCliente()

   ::defineFormaPago()

   ::defineComboImpresion()

   ::definePorcentaje()

   ::defineCheckRecargo()

   ::defineBrowseIva()

   ::oDlg:bResized         := {|| ::resizeDialog() }

   ::oDlg:bStart           := {|| ::oSender:lValidPayment() }

   ::oDlg:Activate( ,,,.T.,,, {|| ::InitDialog() } )

Return ( ::oDlg:nResult == 1 )



static FUNCTION ViewEditResumen_defineBotonesGenerales( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen








   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 7.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_error_64", "bLClicked" => {|| ::oDlg:End() }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 9, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_printer_64", "bLClicked" => {|| ::oDlg:End( 1 ), ::oSender:setFormatToPrint( ::cCbxImpresora ) }, "oWnd"      => ::oDlg } )







   TGridImage():Build(  {  "nTop"      => 5, "nLeft"     => {|| GridWidth( 10.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "gc_ok_64", "bLClicked" => {|| ::oDlg:End( 1 ) }, "oWnd"      => ::oDlg } )

Return ( self )



static FUNCTION ViewEditResumen_defineCliente( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen











   TGridSay():Build( {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Cliente: " }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 23, "lDesign"   => .F. } )








   TGridGet():Build( {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "oWnd"      => ::oDlg, "bSetGet"   => {|u| hGet( ::oSender:hDictionaryMaster, "Cliente" ) }, "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 23, "bWhen"     => {|| .F. }, "lPixels"   => .T. } )








   TGridGet():Build( {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 4.5, ::oDlg ) }, "oWnd"      => ::oDlg, "bSetGet"   => {|u| hGet( ::oSender:hDictionaryMaster, "NombreCliente" )  }, "lPixels"   => .T., "nWidth"    => {|| GridWidth( 7, ::oDlg ) }, "bWhen"     => {|| .F.}, "nHeight"   => 23 } )

   ::nextRow()

Return ( self )



static FUNCTION ViewEditResumen_defineFormaPago( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen










   TGridUrllink():Build({  "nTop"      => ::getRow(), "nLeft"     => {|| GridWidth( 0.5, ::oDlg ) }, "cURL"      => "F. pago", "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixel"    => .T., "nClrInit"  => nGridColor(), "nClrOver"  => nGridColor(), "nClrVisit" => nGridColor(), "bAction"   => {|| ::oSender:runGridPayment() } } )









   ::oCodigoFormaPago   := TGridGet():Build( {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "Pago" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 23, "lPixels"   => .T., "bWhen"     => {|| ::oSender:lNotZoomMode() }, "bValid"    => {|| ::oSender:lValidPayment() } } )







   ::oNombreFormaPago   := TGridGet():Build(  { "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 4.5, ::oDlg ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 7, ::oDlg ) }, "lPixels"   => .T., "bWhen"     => {|| .F. }, "nHeight"   => 23 } )

   ::nextRow()

Return ( self )



static FUNCTION ViewEditResumen_defineComboImpresion( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen

   ::oSender:SetDocuments()











   TGridSay():Build(                            {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Impresión:" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 25, "lDesign"   => .F. } )







   ::oCbxImpresora  := TGridComboBox():Build(  {   "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| if( PCount() == 0, ::cCbxImpresora, ::cCbxImpresora := u ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 9, ::oDlg ) }, "nHeight"   => 25, "aItems"    => ::aCbxImpresora } )

   ::nextRow()

Return ( self )



static FUNCTION ViewEditResumen_definePorcentaje( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen











   TGridSay():Build(                            {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "bText"     => {|| "Porcentaje descuento" }, "oWnd"      => ::oDlg, "oFont"     => oGridFont(), "lPixels"   => .T., "nClrText"  => ( 0 + ( 0 * 256 ) + ( 0 * 65536 ) ), "nClrBack"  => ( 255 + ( 255 * 256 ) + ( 255 * 65536 ) ), "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "nHeight"   => 25, "lDesign"   => .F. } )











   ::oPorcentajeDescuento := TGridGet():Build(  {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 2.5, ::oDlg ) }, "bSetGet"   => {|u| ::SetGetValue( u, "PorcentajeDescuento1" ) }, "oWnd"      => ::oDlg, "lPixels"   => .T., "nWidth"    => {|| GridWidth( 2, ::oDlg ) }, "cPict"     => "@E 999.99", "lRight"    => .T., "nHeight"   => 25, "bWhen"     => {|| ::oSender:lNotZoomMode() }, "bValid"    => {|| ::oSender:recalcularTotal() } } )







   TGridImage():Build(  {  "nTop"      => ::getRow(), "nLeft"     => {|| GridWidth( 10.5, ::oDlg ) }, "nWidth"    => 64, "nHeight"   => 64, "cResName"  => "GC_CONTRACT_64", "bLClicked" => {|| ::oSender:runGridSignature() }, "oWnd"      => ::oDlg } )

   ::nextRow()

Return ( self )



static FUNCTION ViewEditResumen_defineCheckRecargo( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen











   ::oCheckBoxRecargo   := TGridCheckBox():Build(  {  "nRow"      => ::getRow(), "nCol"      => {|| GridWidth( 0.5, ::oDlg ) }, "cCaption"  => "Recargo Equivalencia", "bSetGet"   => {|u| ::SetGetValue( u, "RecargoEquivalencia" ) }, "oWnd"      => ::oDlg, "nWidth"    => {|| GridWidth( 7, ::oDlg ) }, "nHeight"   => 23, "oFont"     => oGridFont(), "lPixels"   => .T., "bWhen"     => {|| ::oSender:lNotZoomMode() }, "bChange"   => {|| ::oBrowse:Refresh() } } )

   ::nextRow()

Return ( self )



static FUNCTION ViewEditResumen_defineBrowseIva( ) ; local Self AS CLASS ViewEditResumen := QSelf() AS CLASS ViewEditResumen

   ::oBrowse                  := TGridIXBrowse():New( ::oDlg )

   ::oBrowse:nTop             := ::oBrowse:EvalRow( ::getRow() )
   ::oBrowse:nLeft            := ::oBrowse:EvalCol( {|| GridWidth( 0.5, ::oDlg ) } )
   ::oBrowse:nWidth           := ::oBrowse:EvalWidth( {|| GridWidth( 11, ::oDlg ) } )
   ::oBrowse:nHeight          := ::oBrowse:EvalHeight( {|| GridHeigth( ::oDlg ) - ::oBrowse:nTop - 10 } )
   ::oBrowse:lFooter          := .T.
   ::oBrowse:nMarqueeStyle    := 6

   with object ( ::oBrowse:AddCol() )
      :cHeader             := "Base"
      :bStrData            := {|| ::oSender:oTotalDocument:showBaseIVA( ::oBrowse:nArrayAt ) }
      :nWidth              := 170
      :nDataStrAlign       := 1
      :nHeadStrAlign       := 1
      :nFootStrAlign       := 1
      :bFooter             := {|| ::oSender:oTotalDocument:transBase() }
   end

   with object ( ::oBrowse:AddCol() )
      :cHeader             := "%" + cImp() + " - % RE"
      :bStrData            := {|| ::oSender:oTotalDocument:showPorcentajesIVA( ::oBrowse:nArrayAt ) }
      :nWidth              := 170
      :nDataStrAlign       := 1
      :nHeadStrAlign       := 1
   end

   with object ( ::oBrowse:AddCol() )
      :cHeader             := cImp() + " - RE"
      :bStrData            := {|| ::oSender:oTotalDocument:showImportesIVA( ::oBrowse:nArrayAt ) }
      :nWidth              := 160
      :nDataStrAlign       := 1
      :nHeadStrAlign       := 1
      :nFootStrAlign       := 1
      :bFooter             := {|| ::oSender:oTotalDocument:transPrice() }
   end

   with object ( ::oBrowse:AddCol() )
      :cHeader             := "Total"
      :bStrData            := {|| ::oSender:oTotalDocument:showTotalIVA( ::oBrowse:nArrayAt ) }
      :nWidth              := 170
      :nDataStrAlign       := 1
      :nHeadStrAlign       := 1
      :nFootStrAlign       := 1
      :bFooter             := {|| ::oSender:oTotalDocument:transTotalDocument() }
   end

   ::oBrowse:nHeaderHeight    := 48
   ::oBrowse:nFooterHeight    := 48
   ::oBrowse:nRowHeight       := 96
   ::oBrowse:nDataLines       := 2

   ::oBrowse:SetArray( ::oSender:oTotalDocument:oIva:aIva, , , .F. )

   ::oBrowse:CreateFromCode()

Return ( self )
